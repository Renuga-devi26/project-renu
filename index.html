<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RuralCare AI - Smart Symptom Analyzer with AI Suggestions</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Segoe UI,Arial;background:#f5f5f6;padding:20px;color:#263238}
.container{max-width:1400px;margin:auto}
.section{background:#fff;padding:25px;border-radius:14px;margin-bottom:25px;box-shadow:0 4px 10px rgba(0,0,0,.1)}
h2{color:#1b5e20;margin-bottom:15px;border-bottom:2px solid #e8f5e9;padding-bottom:10px}
h3{color:#2e7d32;margin:15px 0 10px}
.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:15px}
.symptom-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin:15px 0}
input,select,textarea{padding:12px;border:1px solid #ccc;border-radius:8px;width:100%;font-size:14px}
textarea{min-height:80px;resize:vertical}
button{padding:12px 25px;border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:15px;transition:all 0.3s}
button:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(0,0,0,0.2)}
.btn-primary{background:#1b5e20;color:#fff}
.btn-warning{background:#ef6c00;color:#fff}
.btn-secondary{background:#eee;color:#333}
.btn-danger{background:#c62828;color:#fff}
.btn-group{display:flex;gap:15px;flex-wrap:wrap;margin:20px 0}
#results{display:none;margin-top:20px}
.status-healthy{color:#2e7d32;font-weight:bold;font-size:18px}
.status-followup{color:#ef6c00;font-weight:bold;font-size:18px}
.status-emergency{color:#c62828;font-weight:bold;font-size:18px}
.progress{height:25px;background:#ddd;border-radius:15px;margin:10px 0;overflow:hidden}
.progress-bar{height:100%;background:#1b5e20;width:0%;transition:width 0.5s}
table{width:100%;border-collapse:collapse;margin-top:15px;background:white;border-radius:10px;overflow:hidden}
th,td{padding:12px;border-bottom:1px solid #e0e0e0;text-align:left}
th{background:#1b5e20;color:white;font-weight:500}
tr:hover{background:#f5f5f5}
.symptom-category{background:#f1f8e9;padding:15px;border-radius:10px;margin-bottom:15px}
.symptom-item{display:flex;align-items:center;gap:8px;padding:8px;background:white;border-radius:6px;border:1px solid #c8e6c9}
.symptom-item input[type="checkbox"]{width:18px;height:18px;cursor:pointer}
.symptom-item label{cursor:pointer;flex:1}
.severity-badge{font-size:11px;padding:2px 6px;border-radius:4px;background:#eee}
.severity-high{background:#ffcdd2;color:#c62828}
.severity-medium{background:#fff3e0;color:#ef6c00}
.severity-low{background:#e8f5e9;color:#2e7d32}
.recommendation-box{background:#e8f5e9;padding:15px;border-radius:10px;margin:10px 0}
.recommendation-item{padding:10px;border-left:4px solid #1b5e20;margin:8px 0;background:white}
.emergency-box{background:#ffebee;border:2px solid #c62828;padding:20px;border-radius:10px;margin:15px 0}
.emergency-text{color:#c62828;font-weight:bold;font-size:16px}
.filter-buttons{display:flex;gap:10px;margin-bottom:15px;flex-wrap:wrap}
.filter-btn{padding:8px 15px;background:#e0e0e0;border-radius:20px;cursor:pointer}
.filter-btn.active{background:#1b5e20;color:white}
.symptom-tag{display:inline-block;background:#e8f5e9;padding:5px 12px;border-radius:20px;margin:3px;font-size:13px;border:1px solid #a5d6a7}
.medicine-item{background:#e3f2fd;padding:10px;margin:5px 0;border-radius:6px;border-left:4px solid #1565c0}
.ai-suggestion{background:#f3e5f5;padding:15px;border-radius:10px;margin:15px 0;border-left:4px solid #7b1fa2}
.ai-badge{background:#7b1fa2;color:white;padding:3px 10px;border-radius:15px;font-size:12px;display:inline-block;margin-bottom:10px}
.possible-condition{background:#fff3e0;padding:10px;border-radius:8px;margin:8px 0;border-left:4px solid #ef6c00}
.condition-name{font-weight:bold;color:#ef6c00}
.confidence-score{font-size:12px;color:#666}
.loader{display:none;text-align:center;padding:20px}
.loader-spinner{border:4px solid #f3f3f3;border-top:4px solid #1b5e20;border-radius:50%;width:40px;height:40px;animation:spin 1s linear infinite;margin:auto}
@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
</style>
</head>
<body>
<div class="container">

<!-- Patient Information Section -->
<div class="section">
<h2>üìã Patient Information</h2>
<div class="form-grid">
<input type="text" id="patientName" placeholder="Full Name *" required>
<input type="number" id="patientAge" placeholder="Age *" required>
<select id="patientGender">
<option value="male">Male</option>
<option value="female">Female</option>
<option value="other">Other</option>
</select>
<input type="number" id="height" placeholder="Height (cm)" step="0.1">
<input type="number" id="weight" placeholder="Weight (kg)" step="0.1">
<input type="number" step="0.1" id="temperature" placeholder="Temperature ¬∞C">
<input type="text" id="bp" placeholder="Blood Pressure (e.g., 120/80)">
</div>
</div>

<!-- Symptoms Assessment Section -->
<div class="section">
<h2>ü©∫ AI-Powered Symptom Assessment</h2>
<p style="margin-bottom:15px;color:#666;">Select symptoms for AI analysis and smart suggestions:</p>

<!-- Quick Symptom Search -->
<div style="margin-bottom:20px">
<input type="text" id="symptomSearch" placeholder="üîç Search symptoms..." onkeyup="filterSymptoms()">
</div>

<!-- General Symptoms -->
<div class="symptom-category">
<h3>ü§í General Symptoms</h3>
<div class="symptom-grid" id="generalSymptoms">
<div class="symptom-item"><input type="checkbox" id="fever" value="fever"><label for="fever">Fever / High Temperature</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="chills" value="chills"><label for="chills">Chills / Shivering</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="fatigue" value="fatigue"><label for="fatigue">Fatigue / Weakness</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="nightSweats" value="nightSweats"><label for="nightSweats">Night Sweats</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="weightLoss" value="weightLoss"><label for="weightLoss">Unexplained Weight Loss</label><span class="severity-badge severity-high">High</span></div>
<div class="symptom-item"><input type="checkbox" id="lossAppetite" value="lossAppetite"><label for="lossAppetite">Loss of Appetite</label><span class="severity-badge severity-low">Low</span></div>
</div>
</div>

<!-- Respiratory Symptoms -->
<div class="symptom-category">
<h3>ü´Å Respiratory Symptoms</h3>
<div class="symptom-grid" id="respiratorySymptoms">
<div class="symptom-item"><input type="checkbox" id="cough" value="cough"><label for="cough">Cough</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="dryCough" value="dryCough"><label for="dryCough">Dry Cough</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="wetCough" value="wetCough"><label for="wetCough">Wet Cough with Phlegm</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="bloodCough" value="bloodCough"><label for="bloodCough">Coughing Blood</label><span class="severity-badge severity-high">High</span></div>
<div class="symptom-item"><input type="checkbox" id="shortnessBreath" value="shortnessBreath"><label for="shortnessBreath">Shortness of Breath</label><span class="severity-badge severity-high">High</span></div>
<div class="symptom-item"><input type="checkbox" id="wheezing" value="wheezing"><label for="wheezing">Wheezing</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="chestPain" value="chestPain"><label for="chestPain">Chest Pain / Tightness</label><span class="severity-badge severity-high">High</span></div>
<div class="symptom-item"><input type="checkbox" id="soreThroat" value="soreThroat"><label for="soreThroat">Sore Throat</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="runnyNose" value="runnyNose"><label for="runnyNose">Runny / Blocked Nose</label><span class="severity-badge severity-low">Low</span></div>
</div>
</div>

<!-- Gastrointestinal Symptoms -->
<div class="symptom-category">
<h3>ü´É Gastrointestinal Symptoms</h3>
<div class="symptom-grid" id="giSymptoms">
<div class="symptom-item"><input type="checkbox" id="nausea" value="nausea"><label for="nausea">Nausea</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="vomiting" value="vomiting"><label for="vomiting">Vomiting</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="diarrhea" value="diarrhea"><label for="diarrhea">Diarrhea</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="bloodStool" value="bloodStool"><label for="bloodStool">Blood in Stool</label><span class="severity-badge severity-high">High</span></div>
<div class="symptom-item"><input type="checkbox" id="constipation" value="constipation"><label for="constipation">Constipation</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="abdominalPain" value="abdominalPain"><label for="abdominalPain">Abdominal Pain</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="bloating" value="bloating"><label for="bloating">Bloating / Gas</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="heartburn" value="heartburn"><label for="heartburn">Heartburn / Acidity</label><span class="severity-badge severity-low">Low</span></div>
</div>
</div>

<!-- Neurological Symptoms -->
<div class="symptom-category">
<h3>üß† Neurological Symptoms</h3>
<div class="symptom-grid" id="neuroSymptoms">
<div class="symptom-item"><input type="checkbox" id="headache" value="headache"><label for="headache">Headache</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="migraine" value="migraine"><label for="migraine">Severe Migraine</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="dizziness" value="dizziness"><label for="dizziness">Dizziness / Vertigo</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="fainting" value="fainting"><label for="fainting">Fainting / Loss of Consciousness</label><span class="severity-badge severity-high">High</span></div>
<div class="symptom-item"><input type="checkbox" id="seizures" value="seizures"><label for="seizures">Seizures / Fits</label><span class="severity-badge severity-high">High</span></div>
<div class="symptom-item"><input type="checkbox" id="confusion" value="confusion"><label for="confusion">Confusion / Disorientation</label><span class="severity-badge severity-high">High</span></div>
<div class="symptom-item"><input type="checkbox" id="numbness" value="numbness"><label for="numbness">Numbness / Tingling</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="tremor" value="tremor"><label for="tremor">Tremors / Shaking</label><span class="severity-badge severity-medium">Medium</span></div>
</div>
</div>

<!-- Musculoskeletal Symptoms -->
<div class="symptom-category">
<h3>üí™ Musculoskeletal Symptoms</h3>
<div class="symptom-grid" id="muscleSymptoms">
<div class="symptom-item"><input type="checkbox" id="jointPain" value="jointPain"><label for="jointPain">Joint Pain</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="musclePain" value="musclePain"><label for="musclePain">Muscle Pain / Body Ache</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="backPain" value="backPain"><label for="backPain">Back Pain</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="neckPain" value="neckPain"><label for="neckPain">Neck Pain / Stiffness</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="swellingJoints" value="swellingJoints"><label for="swellingJoints">Swollen Joints</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="injury" value="injury"><label for="injury">Recent Injury / Trauma</label><span class="severity-badge severity-medium">Medium</span></div>
</div>
</div>

<!-- Skin Symptoms -->
<div class="symptom-category">
<h3>üî¥ Skin Symptoms</h3>
<div class="symptom-grid" id="skinSymptoms">
<div class="symptom-item"><input type="checkbox" id="rash" value="rash"><label for="rash">Skin Rash</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="itching" value="itching"><label for="itching">Itching</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="wounds" value="wounds"><label for="wounds">Wounds / Sores</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="infection" value="infection"><label for="infection">Skin Infection</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="yellowSkin" value="yellowSkin"><label for="yellowSkin">Yellow Skin / Eyes (Jaundice)</label><span class="severity-badge severity-high">High</span></div>
<div class="symptom-item"><input type="checkbox" id="bruising" value="bruising"><label for="bruising">Easy Bruising</label><span class="severity-badge severity-medium">Medium</span></div>
</div>
</div>

<!-- Urinary Symptoms -->
<div class="symptom-category">
<h3>üöΩ Urinary Symptoms</h3>
<div class="symptom-grid" id="urinarySymptoms">
<div class="symptom-item"><input type="checkbox" id="painUrination" value="painUrination"><label for="painUrination">Pain / Burning during Urination</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="frequentUrination" value="frequentUrination"><label for="frequentUrination">Frequent Urination</label><span class="severity-badge severity-low">Low</span></div>
<div class="symptom-item"><input type="checkbox" id="bloodUrine" value="bloodUrine"><label for="bloodUrine">Blood in Urine</label><span class="severity-badge severity-high">High</span></div>
<div class="symptom-item"><input type="checkbox" id="urineLeakage" value="urineLeakage"><label for="urineLeakage">Urine Leakage / Incontinence</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="flankPain" value="flankPain"><label for="flankPain">Flank / Kidney Pain</label><span class="severity-badge severity-high">High</span></div>
</div>
</div>

<!-- Cardiovascular Symptoms -->
<div class="symptom-category">
<h3>‚ù§Ô∏è Cardiovascular Symptoms</h3>
<div class="symptom-grid" id="cardioSymptoms">
<div class="symptom-item"><input type="checkbox" id="palpitations" value="palpitations"><label for="palpitations">Heart Palpitations</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="chestPressure" value="chestPressure"><label for="chestPressure">Chest Pressure / Heaviness</label><span class="severity-badge severity-high">High</span></div>
<div class="symptom-item"><input type="checkbox" id="swellingFeet" value="swellingFeet"><label for="swellingFeet">Swelling in Feet / Ankles</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="irregularHeartbeat" value="irregularHeartbeat"><label for="irregularHeartbeat">Irregular Heartbeat</label><span class="severity-badge severity-high">High</span></div>
</div>
</div>

<!-- Eye & Ear Symptoms -->
<div class="symptom-category">
<h3>üëÅÔ∏è Eye & Ear Symptoms</h3>
<div class="symptom-grid" id="senseSymptoms">
<div class="symptom-item"><input type="checkbox" id="blurredVision" value="blurredVision"><label for="blurredVision">Blurred Vision</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="eyePain" value="eyePain"><label for="eyePain">Eye Pain / Redness</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="hearingLoss" value="hearingLoss"><label for="hearingLoss">Hearing Loss</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="earPain" value="earPain"><label for="earPain">Ear Pain / Discharge</label><span class="severity-badge severity-medium">Medium</span></div>
<div class="symptom-item"><input type="checkbox" id="ringingEars" value="ringingEars"><label for="ringingEars">Ringing in Ears (Tinnitus)</label><span class="severity-badge severity-low">Low</span></div>
</div>
</div>

<!-- Additional Notes -->
<div style="margin-top:20px">
<textarea id="additionalSymptoms" placeholder="Describe any other symptoms in detail... (This helps AI provide better analysis)"></textarea>
</div>
</div>

<!-- Action Buttons -->
<div class="btn-group">
<button class="btn-primary" onclick="analyzeHealth()">ü§ñ AI Health Analysis</button>
<button class="btn-secondary" onclick="clearForm()">üîÑ Clear Form</button>
<button class="btn-danger" onclick="emergencyOverride()">üö® Emergency Override</button>
</div>

<!-- Loading Indicator -->
<div id="loader" class="loader">
<div class="loader-spinner"></div>
<p style="margin-top:10px">AI is analyzing symptoms...</p>
</div>

<!-- Results Section -->
<div id="results" class="section">
<h2>üìä AI-Powered Health Report</h2>
<div id="emergencyAlert" style="display:none" class="emergency-box">
<div class="emergency-text">üö® EMERGENCY - Immediate Action Required</div>
<p id="emergencyMessage">Patient requires urgent medical attention.</p>
</div>

<!-- AI Suggestions Box -->
<div id="aiSuggestions" class="ai-suggestion">
<div class="ai-badge">ü§ñ AI ANALYSIS</div>
<h3>Possible Conditions:</h3>
<div id="possibleConditions"></div>
<p style="margin-top:10px;font-style:italic;color:#666;">*This is an AI-generated suggestion based on symptom patterns. Please consult a doctor for proper diagnosis.</p>
</div>

<p id="statusText"></p>
<p id="description"></p>

<div>
<h3>Analysis Confidence</h3>
<div class="progress"><div id="confidenceBar" class="progress-bar"></div></div>
<p id="confidenceText"></p>
</div>

<div id="symptomSummary" style="margin:15px 0;padding:15px;background:#f5f5f5;border-radius:8px">
<h3>üìã Reported Symptoms:</h3>
<div id="symptomList"></div>
</div>

<div id="recommendations" style="margin:20px 0">
<h3>üí° AI-Powered Recommendations:</h3>
<div id="recommendationsList"></div>
</div>

<div id="medicines" style="margin:20px 0;padding:15px;background:#e3f2fd;border-radius:8px">
<h3>üíä Suggested Medicines (Consult Doctor Before Use):</h3>
<div id="medicinesList"></div>
<p style="font-size:12px;color:#666;margin-top:10px;">‚ö†Ô∏è Always consult a healthcare professional before taking any medication</p>
</div>

<div id="followUp"></div>
</div>

<!-- Past Screenings Section -->
<div class="section">
<h2>üìú Recent Screening History</h2>
<div class="filter-buttons">
<span class="filter-btn active" onclick="filterScreenings('all')">All</span>
<span class="filter-btn" onclick="filterScreenings('healthy')">Healthy</span>
<span class="filter-btn" onclick="filterScreenings('followup')">Follow-up</span>
<span class="filter-btn" onclick="filterScreenings('emergency')">Emergency</span>
</div>
<table>
<thead>
<tr><th>Time</th><th>Name</th><th>Age</th><th>Gender</th><th>Symptoms</th><th>AI Diagnosis</th><th>Status</th></tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>

</div>

<script>
// Global variables
let screenings = JSON.parse(localStorage.getItem("screenings") || "[]");

// Initial render
renderTable();

// Symptom search filter
function filterSymptoms() {
    let searchText = document.getElementById('symptomSearch').value.toLowerCase();
    let symptomItems = document.querySelectorAll('.symptom-item');
    
    symptomItems.forEach(item => {
        let label = item.querySelector('label').textContent.toLowerCase();
        if (label.includes(searchText) || searchText === '') {
            item.style.display = 'flex';
        } else {
            item.style.display = 'none';
        }
    });
}

// Clear form function
function clearForm() {
    document.getElementById('patientName').value = '';
    document.getElementById('patientAge').value = '';
    document.getElementById('patientGender').value = 'male';
    document.getElementById('height').value = '';
    document.getElementById('weight').value = '';
    document.getElementById('temperature').value = '';
    document.getElementById('bp').value = '';
    document.getElementById('additionalSymptoms').value = '';
    document.getElementById('symptomSearch').value = '';
    
    // Uncheck all checkboxes
    const checkboxes = document.querySelectorAll('input[type="checkbox"]');
    checkboxes.forEach(cb => cb.checked = false);
    
    // Hide results
    document.getElementById('results').style.display = 'none';
    
    // Show all symptoms again
    filterSymptoms();
}

// Emergency override
function emergencyOverride() {
    const name = document.getElementById("patientName").value.trim();
    const age = parseInt(document.getElementById("patientAge").value);
    const gender = document.getElementById("patientGender").value;
    
    if (!name || !age) {
        alert("Please fill Patient Name and Age first");
        return;
    }
    
    // Show loader
    document.getElementById('loader').style.display = 'block';
    document.getElementById('results').style.display = 'none';
    
    setTimeout(() => {
        document.getElementById('loader').style.display = 'none';
        
        const emergencyResult = {
            status: "emergency",
            statusText: "üö® EMERGENCY",
            description: "Emergency override activated. Patient requires immediate medical attention.",
            confidence: 99,
            recommendations: [
                "üöë SEEK EMERGENCY CARE IMMEDIATELY",
                "üìû Call ambulance or rush to nearest hospital",
                "üõå Keep patient in comfortable position",
                "üí¨ Monitor breathing and consciousness",
                "üö´ Do not give food or water if unconscious"
            ],
            medicines: ["Emergency care only - no self medication"],
            symptoms: "Emergency override activated",
            followUp: "URGENT: Immediate emergency care required",
            possibleConditions: [{
                name: "Medical Emergency",
                confidence: "99%",
                description: "Emergency override - Patient requires immediate medical evaluation"
            }]
        };
        
        displayResults(emergencyResult);
        saveScreening(name, age, gender, emergencyResult);
    }, 1000);
}

// Get selected symptoms with labels
function getSelectedSymptoms() {
    const symptoms = [];
    const symptomElements = {
        'fever': 'Fever',
        'chills': 'Chills',
        'fatigue': 'Fatigue',
        'nightSweats': 'Night Sweats',
        'weightLoss': 'Weight Loss',
        'lossAppetite': 'Loss of Appetite',
        'cough': 'Cough',
        'dryCough': 'Dry Cough',
        'wetCough': 'Wet Cough',
        'bloodCough': 'Coughing Blood',
        'shortnessBreath': 'Shortness of Breath',
        'wheezing': 'Wheezing',
        'chestPain': 'Chest Pain',
        'soreThroat': 'Sore Throat',
        'runnyNose': 'Runny Nose',
        'nausea': 'Nausea',
        'vomiting': 'Vomiting',
        'diarrhea': 'Diarrhea',
        'bloodStool': 'Blood in Stool',
        'constipation': 'Constipation',
        'abdominalPain': 'Abdominal Pain',
        'bloating': 'Bloating',
        'heartburn': 'Heartburn',
        'headache': 'Headache',
        'migraine': 'Migraine',
        'dizziness': 'Dizziness',
        'fainting': 'Fainting',
        'seizures': 'Seizures',
        'confusion': 'Confusion',
        'numbness': 'Numbness',
        'tremor': 'Tremor',
        'jointPain': 'Joint Pain',
        'musclePain': 'Muscle Pain',
        'backPain': 'Back Pain',
        'neckPain': 'Neck Pain',
        'swellingJoints': 'Swollen Joints',
        'injury': 'Injury',
        'rash': 'Rash',
        'itching': 'Itching',
        'wounds': 'Wounds',
        'infection': 'Infection',
        'yellowSkin': 'Yellow Skin',
        'bruising': 'Bruising',
        'painUrination': 'Painful Urination',
        'frequentUrination': 'Frequent Urination',
        'bloodUrine': 'Blood in Urine',
        'urineLeakage': 'Urine Leakage',
        'flankPain': 'Flank Pain',
        'palpitations': 'Palpitations',
        'chestPressure': 'Chest Pressure',
        'swellingFeet': 'Swollen Feet',
        'irregularHeartbeat': 'Irregular Heartbeat',
        'blurredVision': 'Blurred Vision',
        'eyePain': 'Eye Pain',
        'hearingLoss': 'Hearing Loss',
        'earPain': 'Ear Pain',
        'ringingEars': 'Ringing in Ears'
    };
    
    for (let [id, label] of Object.entries(symptomElements)) {
        const element = document.getElementById(id);
        if (element && element.checked) {
            symptoms.push(label);
        }
    }
    
    return symptoms;
}

// AI Symptom Analysis
function analyzeWithAI(symptoms, age, temp, bp) {
    const possibleConditions = [];
    const recommendations = [];
    const medicines = [];
    let emergency = false;
    let emergencyMessage = "";
    
    console.log("Analyzing symptoms:", symptoms);
    console.log("Age:", age, "Temp:", temp, "BP:", bp);
    
    // Check for emergency symptoms first
    const emergencySymptoms = ['Coughing Blood', 'Blood in Stool', 'Blood in Urine', 'Fainting', 'Seizures', 'Confusion', 'Chest Pressure', 'Irregular Heartbeat', 'Yellow Skin'];
    
    for (let symptom of symptoms) {
        if (emergencySymptoms.includes(symptom)) {
            emergency = true;
            emergencyMessage = "Emergency symptoms detected. Immediate medical attention required!";
        }
    }
    
    // Chest pain emergency
    if (symptoms.includes('Chest Pain') || symptoms.includes('Chest Pressure')) {
        emergency = true;
        emergencyMessage = "Chest pain detected - Possible cardiac event. Seek emergency care immediately.";
    }
    
    // Shortness of breath with chest pain
    if (symptoms.includes('Shortness of Breath') && (symptoms.includes('Chest Pain') || symptoms.includes('Chest Pressure'))) {
        emergency = true;
        emergencyMessage = "Shortness of breath with chest pain - Cardiac emergency.";
    }
    
    // High fever with neurological symptoms
    if (temp > 39.5 && (symptoms.includes('Seizures') || symptoms.includes('Confusion'))) {
        emergency = true;
        emergencyMessage = "Very high fever with neurological symptoms - Possible severe infection.";
    }
    
    // Blood pressure emergency
    if (bp) {
        const bpParts = bp.split('/');
        if (bpParts.length === 2) {
            const systolic = parseInt(bpParts[0]);
            if (systolic >= 180) {
                emergency = true;
                emergencyMessage = "Critically high blood pressure - Hypertensive emergency.";
            }
        }
    }
    
    // Age-specific emergencies
    if (age < 5 && (symptoms.includes('Fever') || symptoms.includes('Vomiting') || symptoms.includes('Diarrhea'))) {
        emergency = true;
        emergencyMessage = "Young child with symptoms needs immediate medical attention.";
    }
    
    if (age > 70 && (symptoms.includes('Chest Pain') || symptoms.includes('Confusion') || symptoms.includes('Shortness of Breath'))) {
        emergency = true;
        emergencyMessage = "Elderly patient with serious symptoms - Immediate care required.";
    }
    
    // If emergency, return early
    if (emergency) {
        return {
            emergency: true,
            emergencyMessage: emergencyMessage,
            possibleConditions: [{
                name: "MEDICAL EMERGENCY",
                confidence: "95%",
                description: emergencyMessage
            }],
            recommendations: [
                "üöë SEEK EMERGENCY CARE IMMEDIATELY",
                "üìû Call ambulance or rush to nearest hospital",
                "üõå Keep patient in comfortable position",
                "üí¨ Monitor breathing and consciousness",
                "üö´ Do not give food or water if unconscious"
            ],
            medicines: ["Emergency care only - no self medication"]
        };
    }
    
    // If no symptoms selected
    if (symptoms.length === 0) {
        possibleConditions.push({
            name: "No Symptoms Reported",
            confidence: "100%
