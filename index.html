<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>RuralCare - Patient & Doctor Portal with Unique IDs</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        :root {
            --primary: #2A7A62;
            --primary-dark: #1E5F4B;
            --primary-light: #E8F5F2;
            --secondary: #FF8A5C;
            --accent: #FF6B6B;
            --success: #4CAF50;
            --warning: #FFC107;
            --danger: #F44336;
            --dark: #2D4059;
            --light: #F9F9F9;
            --gray: #6C757D;
            --border: #E9ECEF;
            --shadow: 0 5px 15px rgba(0,0,0,0.08);
            --shadow-lg: 0 10px 30px rgba(0,0,0,0.12);
        }

        body {
            background: linear-gradient(135deg, #667EEA 0%, #764BA2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Language Switcher */
        .language-switcher {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
            background: white;
            padding: 10px 20px;
            border-radius: 50px;
            box-shadow: var(--shadow-lg);
            flex-wrap: wrap;
        }

        .lang-btn {
            padding: 8px 16px;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 30px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .lang-btn.active {
            background: var(--primary);
            color: white;
        }

        /* Login Container */
        .login-container {
            max-width: 1200px;
            width: 100%;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-box {
            background: white;
            border-radius: 40px;
            padding: 40px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
            transition: transform 0.3s;
        }

        .login-box:hover {
            transform: translateY(-5px);
        }

        .login-box.patient {
            border-top: 8px solid var(--primary);
        }

        .login-box.doctor {
            border-top: 8px solid var(--accent);
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-icon {
            width: 80px;
            height: 80px;
            background: var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5rem;
            color: var(--primary);
        }

        .doctor .login-icon {
            background: #FFE5E5;
            color: var(--accent);
        }

        .login-header h2 {
            color: var(--dark);
            font-size: 1.8rem;
            margin-bottom: 5px;
        }

        .login-header p {
            color: var(--gray);
            font-size: 0.95rem;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid var(--border);
            border-radius: 50px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(42, 122, 98, 0.1);
        }

        .doctor .form-group input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(255, 107, 107, 0.1);
        }

        .login-btn {
            width: 100%;
            padding: 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 20px rgba(42, 122, 98, 0.3);
        }

        .doctor .login-btn {
            background: var(--accent);
            box-shadow: 0 10px 20px rgba(255, 107, 107, 0.3);
        }

        .login-btn:hover {
            transform: translateY(-2px);
            filter: brightness(1.1);
        }

        .demo-credentials {
            margin-top: 20px;
            padding: 15px;
            background: var(--light);
            border-radius: 20px;
            font-size: 0.9rem;
            color: var(--gray);
            max-height: 150px;
            overflow-y: auto;
        }

        .demo-credentials i {
            color: var(--primary);
            margin-right: 5px;
        }

        .doctor .demo-credentials i {
            color: var(--accent);
        }

        /* Main App */
        .main-app {
            display: none;
            width: 100%;
            max-width: 1400px;
            background: white;
            border-radius: 40px;
            padding: 30px;
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
        }

        .main-app.visible {
            display: block;
        }

        .app-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border);
            flex-wrap: wrap;
            gap: 15px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 60px;
            height: 60px;
            background: var(--primary-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            color: var(--primary);
        }

        .user-details h3 {
            color: var(--dark);
            font-size: 1.3rem;
        }

        .user-details p {
            color: var(--gray);
            font-size: 0.95rem;
            margin: 2px 0;
        }

        .logout-btn {
            padding: 10px 25px;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: #d32f2f;
            transform: translateY(-2px);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--light);
            border-radius: 25px;
            padding: 25px;
            text-align: center;
            transition: transform 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--dark);
        }

        .stat-label {
            color: var(--gray);
            font-size: 0.9rem;
        }

        .patient-form {
            background: var(--light);
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .form-title {
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .symptoms-section {
            background: var(--light);
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
        }

        .category-tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .category-tab {
            padding: 10px 20px;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .category-tab.active {
            background: var(--primary);
            color: white;
        }

        .symptoms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
            background: white;
            border-radius: 20px;
            margin-bottom: 20px;
        }

        .symptom-item {
            padding: 12px 15px;
            background: var(--light);
            border-radius: 30px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .symptom-item.selected {
            background: var(--primary);
            color: white;
        }

        .selected-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            min-height: 60px;
            padding: 15px;
            background: white;
            border-radius: 20px;
        }

        .symptom-tag {
            background: var(--primary);
            color: white;
            padding: 8px 16px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .symptom-tag button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
        }

        .voice-section {
            background: linear-gradient(135deg, #667EEA, #764BA2);
            border-radius: 30px;
            padding: 30px;
            margin-bottom: 30px;
            color: white;
        }

        .voice-controls {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .record-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: white;
            color: var(--danger);
            border: none;
            font-size: 2.2rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .record-btn.recording {
            background: var(--danger);
            color: white;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .timer {
            font-size: 2rem;
            font-family: monospace;
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 50px;
        }

        .analyze-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--secondary), var(--accent));
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 600;
            cursor: pointer;
            margin: 30px 0;
            transition: all 0.3s;
        }

        .analyze-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 20px 40px rgba(255, 138, 92, 0.3);
        }

        .results-card {
            background: white;
            border-radius: 30px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: var(--shadow-lg);
            display: none;
        }

        .severity-badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 30px;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .severity-low { background: #E8F5E9; color: #2E7D32; }
        .severity-medium { background: #FFF3E0; color: #F57C00; }
        .severity-high { background: #FFEBEE; color: #C62828; }

        .doctor-dashboard {
            background: var(--light);
            border-radius: 30px;
            padding: 30px;
            margin-top: 30px;
        }

        .patient-record {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            border: 2px solid var(--border);
        }

        .patient-info h4 {
            color: var(--dark);
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .patient-info p {
            color: var(--gray);
            font-size: 0.9rem;
            margin: 3px 0;
        }

        .doctor-note {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 20px;
            margin: 20px 0;
            resize: vertical;
            font-size: 1rem;
        }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(200px);
            background: white;
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: var(--shadow-lg);
            border-left: 4px solid var(--success);
            transition: transform 0.3s;
            z-index: 1000;
            font-weight: 500;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        .toast.error {
            border-left-color: var(--danger);
        }

        @media (max-width: 768px) {
            .login-container {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .language-switcher {
                position: relative;
                top: 0;
                right: 0;
                margin-bottom: 20px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Language Switcher -->
    <div class="language-switcher">
        <button class="lang-btn active" onclick="switchLanguage('en')">ЁЯЗмЁЯЗз English</button>
        <button class="lang-btn" onclick="switchLanguage('hi')">ЁЯЗоЁЯЗ│ рд╣рд┐рдиреНрджреА</button>
        <button class="lang-btn" onclick="switchLanguage('ta')">ЁЯЗоЁЯЗ│ родрооро┐ро┤рпН</button>
        <button class="lang-btn" onclick="switchLanguage('te')">ЁЯЗоЁЯЗ│ р░др▒Жр░▓р▒Бр░Чр▒Б</button>
        <button class="lang-btn" onclick="switchLanguage('kn')">ЁЯЗоЁЯЗ│ р▓Хр▓ир│Нр▓ир▓б</button>
        <button class="lang-btn" onclick="switchLanguage('ml')">ЁЯЗоЁЯЗ│ р┤ор┤▓р┤пр┤╛р┤│р┤В</button>
    </div>

    <!-- LOGIN PAGE -->
    <div class="login-container" id="loginPage">
        <!-- Patient Login -->
        <div class="login-box patient">
            <div class="login-header">
                <div class="login-icon">
                    <i class="fas fa-user"></i>
                </div>
                <h2 data-i18n="patientLogin">Patient Login</h2>
                <p data-i18n="patientSubtitle">Login with your Patient ID</p>
            </div>

            <div class="form-group">
                <input type="text" id="patientId" placeholder="Patient ID" value="PAT001">
            </div>
            <div class="form-group">
                <input type="password" id="patientPassword" placeholder="Password" value="patient123">
            </div>
            <button class="login-btn" onclick="patientLogin()">
                <i class="fas fa-sign-in-alt"></i> <span data-i18n="patientLoginBtn">Login as Patient</span>
            </button>

            <div class="demo-credentials">
                <i class="fas fa-info-circle"></i>
                <strong data-i18n="demoPatients">Available Patient IDs:</strong><br>
                тАв <strong>PAT001</strong> - Rahul Sharma (pass: patient123)<br>
                тАв <strong>PAT002</strong> - Priya Patel (pass: priya123)<br>
                тАв <strong>PAT003</strong> - Amit Kumar (pass: amit123)<br>
                тАв <strong>PAT004</strong> - Sunita Reddy (pass: sunita123)<br>
                тАв <strong>PAT005</strong> - Vikram Singh (pass: vikram123)<br>
                тАв <strong>PAT006</strong> - Lakshmi Nair (pass: lakshmi123)<br>
                тАв <strong>PAT007</strong> - Rajesh Kumar (pass: rajesh123)<br>
                тАв <strong>PAT008</strong> - Meera Sharma (pass: meera123)<br>
                тАв <strong>PAT009</strong> - Arjun Reddy (pass: arjun123)<br>
                тАв <strong>PAT010</strong> - Kavita Singh (pass: kavita123)
            </div>
        </div>

        <!-- Doctor Login -->
        <div class="login-box doctor">
            <div class="login-header">
                <div class="login-icon">
                    <i class="fas fa-user-md"></i>
                </div>
                <h2 data-i18n="doctorLogin">Doctor Login</h2>
                <p data-i18n="doctorSubtitle">Login with your Doctor ID</p>
            </div>

            <div class="form-group">
                <input type="text" id="doctorId" placeholder="Doctor ID" value="DOC001">
            </div>
            <div class="form-group">
                <input type="password" id="doctorPassword" placeholder="Password" value="doctor123">
            </div>
            <button class="login-btn" onclick="doctorLogin()">
                <i class="fas fa-stethoscope"></i> <span data-i18n="doctorLoginBtn">Login as Doctor</span>
            </button>

            <div class="demo-credentials">
                <i class="fas fa-info-circle"></i>
                <strong data-i18n="demoDoctors">Available Doctor IDs:</strong><br>
                тАв <strong>DOC001</strong> - Dr. Sharma (pass: doctor123)<br>
                тАв <strong>DOC002</strong> - Dr. Gupta (pass: doctor123)<br>
                тАв <strong>DOC003</strong> - Dr. Verma (pass: doctor123)<br>
                тАв <strong>DOC004</strong> - Dr. Reddy (pass: doctor123)<br>
                тАв <strong>DOC005</strong> - Dr. Nair (pass: doctor123)<br>
                тАв <strong>DOC006</strong> - Dr. Kumar (pass: doctor123)<br>
                тАв <strong>DOC007</strong> - Dr. Singh (pass: doctor123)<br>
                тАв <strong>DOC008</strong> - Dr. Patel (pass: doctor123)<br>
                тАв <strong>DOC009</strong> - Dr. Menon (pass: doctor123)<br>
                тАв <strong>DOC010</strong> - Dr. Iyer (pass: doctor123)
            </div>
        </div>
    </div>

    <!-- PATIENT DASHBOARD -->
    <div class="main-app" id="patientApp">
        <div class="app-header">
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <div class="user-details">
                    <h3 id="patientName">Patient Name</h3>
                    <p><i class="fas fa-id-card"></i> ID: <span id="patientID">PAT001</span></p>
                    <p><i class="fas fa-envelope"></i> <span id="patientEmail">email@example.com</span></p>
                    <p><i class="fas fa-phone"></i> <span id="patientPhone">phone</span></p>
                </div>
            </div>
            <button class="logout-btn" onclick="logout('patient')">
                <i class="fas fa-sign-out-alt"></i> <span data-i18n="logout">Logout</span>
            </button>
        </div>

        <!-- Stats -->
        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-calendar-check"></i>
                <div class="stat-number" id="totalVisits">0</div>
                <div class="stat-label" data-i18n="totalVisits">Total Visits</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-notes-medical"></i>
                <div class="stat-number" id="totalDiagnoses">0</div>
                <div class="stat-label" data-i18n="diagnoses">Diagnoses</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-exclamation-triangle"></i>
                <div class="stat-number" id="highRiskCount">0</div>
                <div class="stat-label" data-i18n="highRisk">High Risk</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-calendar-day"></i>
                <div class="stat-number" id="todayCount">0</div>
                <div class="stat-label" data-i18n="today">Today</div>
            </div>
        </div>

        <!-- Patient Information Form -->
        <div class="patient-form">
            <h3 class="form-title">
                <i class="fas fa-user-circle"></i>
                <span data-i18n="patientInfo">Patient Information</span>
            </h3>
            <div class="form-grid">
                <div class="form-group">
                    <input type="text" id="fullName" placeholder="Full Name">
                </div>
                <div class="form-group">
                    <input type="number" id="age" placeholder="Age">
                </div>
                <div class="form-group">
                    <select id="gender">
                        <option value="male" data-i18n="male">Male</option>
                        <option value="female" data-i18n="female">Female</option>
                        <option value="other" data-i18n="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <select id="district">
                        <option value="" data-i18n="selectDistrict">Select District</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Symptom Checker -->
        <div class="symptoms-section">
            <h3 class="form-title">
                <i class="fas fa-stethoscope"></i>
                <span data-i18n="symptomChecker">Symptom Checker (60+ Symptoms)</span>
            </h3>

            <div class="category-tabs" id="symptomCategories">
                <button class="category-tab active" onclick="filterSymptoms('all')" data-i18n="all">All</button>
                <button class="category-tab" onclick="filterSymptoms('respiratory')" data-i18n="respiratory">Respiratory</button>
                <button class="category-tab" onclick="filterSymptoms('digestive')" data-i18n="digestive">Digestive</button>
                <button class="category-tab" onclick="filterSymptoms('neurological')" data-i18n="neurological">Neurological</button>
                <button class="category-tab" onclick="filterSymptoms('muscular')" data-i18n="muscular">Muscular</button>
                <button class="category-tab" onclick="filterSymptoms('skin')" data-i18n="skin">Skin</button>
                <button class="category-tab" onclick="filterSymptoms('cardiovascular')" data-i18n="cardiovascular">Cardio</button>
                <button class="category-tab" onclick="filterSymptoms('general')" data-i18n="general">General</button>
                <button class="category-tab" onclick="filterSymptoms('urinary')" data-i18n="urinary">Urinary</button>
            </div>

            <div class="symptoms-grid" id="symptomsGrid"></div>

            <h4 style="margin-bottom: 10px;" data-i18n="selectedSymptoms">Selected Symptoms:</h4>
            <div class="selected-tags" id="symptomTags"></div>
        </div>

        <!-- Voice Recorder -->
        <div class="voice-section">
            <h3 style="margin-bottom: 20px;">
                <i class="fas fa-microphone-alt"></i>
                <span data-i18n="voiceRecorder">Voice Symptom Recorder</span>
            </h3>
            
            <div class="voice-controls">
                <button class="record-btn" id="recordBtn" onclick="toggleRecording()">
                    <i class="fas fa-microphone"></i>
                </button>
                <div class="timer" id="timer">00:00</div>
            </div>

            <div style="margin-top: 20px;">
                <div class="form-group">
                    <input type="text" id="typedSymptoms" placeholder="Or type symptoms (comma separated)">
                </div>
            </div>
        </div>

        <!-- Analyze Button -->
        <button class="analyze-btn" onclick="analyzeHealth()">
            <i class="fas fa-microchip"></i> <span data-i18n="analyze">Analyze Symptoms</span>
        </button>

        <!-- Results -->
        <div class="results-card" id="results"></div>
    </div>

    <!-- DOCTOR DASHBOARD -->
    <div class="main-app" id="doctorApp">
        <div class="app-header">
            <div class="user-info">
                <div class="user-avatar">
                    <i class="fas fa-user-md"></i>
                </div>
                <div class="user-details">
                    <h3 id="doctorName">Dr. Name</h3>
                    <p><i class="fas fa-id-card"></i> ID: <span id="doctorID">DOC001</span></p>
                    <p><i class="fas fa-envelope"></i> <span id="doctorEmail">doctor@demo.com</span></p>
                    <p><i class="fas fa-phone"></i> <span id="doctorPhone">phone</span></p>
                </div>
            </div>
            <button class="logout-btn" onclick="logout('doctor')">
                <i class="fas fa-sign-out-alt"></i> <span data-i18n="logout">Logout</span>
            </button>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <i class="fas fa-users"></i>
                <div class="stat-number" id="totalPatients">10</div>
                <div class="stat-label" data-i18n="totalPatients">Total Patients</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-notes-medical"></i>
                <div class="stat-number" id="totalReports">0</div>
                <div class="stat-label" data-i18n="reports">Reports</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-exclamation-triangle"></i>
                <div class="stat-number" id="criticalCases">0</div>
                <div class="stat-label" data-i18n="critical">Critical</div>
            </div>
            <div class="stat-card">
                <i class="fas fa-calendar-day"></i>
                <div class="stat-number" id="todayPatients">0</div>
                <div class="stat-label" data-i18n="today">Today</div>
            </div>
        </div>

        <div class="doctor-dashboard">
            <h3 class="form-title">
                <i class="fas fa-clipboard-list"></i>
                <span data-i18n="patientRecords">Patient Records</span>
            </h3>

            <div id="patientRecordsList"></div>

            <h3 class="form-title" style="margin-top: 30px;">
                <i class="fas fa-pen"></i>
                <span data-i18n="addNote">Add Clinical Note</span>
            </h3>
            <textarea class="doctor-note" id="clinicalNote" placeholder="Write your recommendations..." rows="4"></textarea>
            <button class="login-btn" onclick="saveClinicalNote()"><span data-i18n="saveNote">Save Note</span></button>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // ==================== MULTI-LANGUAGE SUPPORT ====================
        let currentLanguage = 'en';
        
        const translations = {
            en: {
                patientLogin: 'Patient Login',
                patientSubtitle: 'Login with your Patient ID',
                doctorLogin: 'Doctor Login',
                doctorSubtitle: 'Login with your Doctor ID',
                patientLoginBtn: 'Login as Patient',
                doctorLoginBtn: 'Login as Doctor',
                demoPatients: 'Available Patient IDs:',
                demoDoctors: 'Available Doctor IDs:',
                logout: 'Logout',
                totalVisits: 'Total Visits',
                diagnoses: 'Diagnoses',
                highRisk: 'High Risk',
                today: 'Today',
                patientInfo: 'Patient Information',
                male: 'Male',
                female: 'Female',
                other: 'Other',
                selectDistrict: 'Select District',
                symptomChecker: 'Symptom Checker (60+ Symptoms)',
                all: 'All',
                respiratory: 'Respiratory',
                digestive: 'Digestive',
                neurological: 'Neurological',
                muscular: 'Muscular',
                skin: 'Skin',
                cardiovascular: 'Cardio',
                general: 'General',
                urinary: 'Urinary',
                selectedSymptoms: 'Selected Symptoms:',
                voiceRecorder: 'Voice Symptom Recorder',
                analyze: 'Analyze Symptoms',
                totalPatients: 'Total Patients',
                reports: 'Reports',
                critical: 'Critical',
                patientRecords: 'Patient Records',
                addNote: 'Add Clinical Note',
                saveNote: 'Save Note',
                noSymptoms: 'No symptoms selected',
                loginFirst: 'Please login first',
                selectSymptoms: 'Please select symptoms',
                analysisComplete: 'Analysis complete!',
                diagnosisReport: 'Diagnosis Report',
                matchedSymptoms: 'Matched Symptoms',
                advice: 'Advice',
                homeRemedies: 'Home Remedies',
                warningSigns: 'Warning Signs',
                printReport: 'Print Report',
                loginSuccess: 'Login successful!',
                invalidCred: 'Invalid Patient ID or Password',
                doctorLoginSuccess: 'Doctor login successful!',
                invalidDoctorCred: 'Invalid Doctor ID or Password',
                logoutSuccess: 'Logged out successfully',
                voiceCaptured: 'Voice captured!',
                noRecords: 'No patient records yet',
                visits: 'visits',
                viewDetails: 'View Details',
                noteSaved: 'Note saved successfully',
                loginWithId: 'Login with your Patient ID',
                // Symptoms translations
                cough: 'Cough',
                shortnessOfBreath: 'Shortness of breath',
                wheezing: 'Wheezing',
                chestPain: 'Chest pain',
                soreThroat: 'Sore throat',
                runnyNose: 'Runny nose',
                sneezing: 'Sneezing',
                nasalCongestion: 'Nasal congestion',
                coughingBlood: 'Coughing up blood',
                dryCough: 'Dry cough',
                nausea: 'Nausea',
                vomiting: 'Vomiting',
                diarrhea: 'Diarrhea',
                constipation: 'Constipation',
                abdominalPain: 'Abdominal pain',
                bloating: 'Bloating',
                heartburn: 'Heartburn',
                lossOfAppetite: 'Loss of appetite',
                bloodInStool: 'Blood in stool',
                difficultySwallowing: 'Difficulty swallowing',
                headache: 'Headache',
                dizziness: 'Dizziness',
                confusion: 'Confusion',
                seizures: 'Seizures',
                tremors: 'Tremors',
                numbness: 'Numbness',
                weakness: 'Weakness',
                memoryLoss: 'Memory loss',
                balanceProblems: 'Balance problems',
                slurredSpeech: 'Slurred speech',
                jointPain: 'Joint pain',
                musclePain: 'Muscle pain',
                backPain: 'Back pain',
                neckPain: 'Neck pain',
                jointSwelling: 'Joint swelling',
                stiffness: 'Stiffness',
                muscleCramps: 'Muscle cramps',
                rash: 'Rash',
                itching: 'Itching',
                hives: 'Hives',
                drySkin: 'Dry skin',
                skinRedness: 'Skin redness',
                skinDiscoloration: 'Skin discoloration',
                woundsNotHealing: 'Wounds not healing',
                fever: 'Fever',
                fatigue: 'Fatigue',
                chills: 'Chills',
                nightSweats: 'Night sweats',
                weightLoss: 'Weight loss',
                weightGain: 'Weight gain',
                dehydration: 'Dehydration',
                swollenLymphNodes: 'Swollen lymph nodes',
                palpitations: 'Palpitations',
                highBP: 'High blood pressure',
                lowBP: 'Low blood pressure',
                swollenAnkles: 'Swollen ankles',
                frequentUrination: 'Frequent urination',
                painfulUrination: 'Painful urination',
                bloodInUrine: 'Blood in urine',
                urgentUrination: 'Urgent urination',
                bodyAche: 'Body ache'
            },
            hi: {
                patientLogin: 'рд░реЛрдЧреА рд▓реЙрдЧрд┐рди',
                patientSubtitle: 'рдЕрдкрдиреЗ рд░реЛрдЧреА рдЖрдИрдбреА рд╕реЗ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ',
                doctorLogin: 'рдбреЙрдХреНрдЯрд░ рд▓реЙрдЧрд┐рди',
                doctorSubtitle: 'рдЕрдкрдиреЗ рдбреЙрдХреНрдЯрд░ рдЖрдИрдбреА рд╕реЗ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ',
                patientLoginBtn: 'рд░реЛрдЧреА рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ',
                doctorLoginBtn: 'рдбреЙрдХреНрдЯрд░ рдХреЗ рд░реВрдк рдореЗрдВ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ',
                demoPatients: 'рдЙрдкрд▓рдмреНрдз рд░реЛрдЧреА рдЖрдИрдбреА:',
                demoDoctors: 'рдЙрдкрд▓рдмреНрдз рдбреЙрдХреНрдЯрд░ рдЖрдИрдбреА:',
                logout: 'рд▓реЙрдЧрдЖрдЙрдЯ',
                totalVisits: 'рдХреБрд▓ рд╡рд┐рдЬрд╝рд┐рдЯ',
                diagnoses: 'рдирд┐рджрд╛рди',
                highRisk: 'рдЙрдЪреНрдЪ рдЬреЛрдЦрд┐рдо',
                today: 'рдЖрдЬ',
                patientInfo: 'рд░реЛрдЧреА рдЬрд╛рдирдХрд╛рд░реА',
                male: 'рдкреБрд░реБрд╖',
                female: 'рдорд╣рд┐рд▓рд╛',
                other: 'рдЕрдиреНрдп',
                selectDistrict: 'рдЬрд┐рд▓рд╛ рдЪреБрдиреЗрдВ',
                symptomChecker: 'рд▓рдХреНрд╖рдг рдЬрд╛рдВрдЪрдХрд░реНрддрд╛ (60+ рд▓рдХреНрд╖рдг)',
                all: 'рд╕рднреА',
                respiratory: 'рд╢реНрд╡рд╕рди',
                digestive: 'рдкрд╛рдЪрди',
                neurological: 'рддрдВрддреНрд░рд┐рдХрд╛',
                muscular: 'рдорд╛рдВрд╕рдкреЗрд╢реА',
                skin: 'рддреНрд╡рдЪрд╛',
                cardiovascular: 'рд╣реГрджрдп',
                general: 'рд╕рд╛рдорд╛рдиреНрдп',
                urinary: 'рдореВрддреНрд░',
                selectedSymptoms: 'рдЪрдпрдирд┐рдд рд▓рдХреНрд╖рдг:',
                voiceRecorder: 'рдЖрд╡рд╛рдЬ рд▓рдХреНрд╖рдг рд░рд┐рдХреЙрд░реНрдбрд░',
                analyze: 'рд▓рдХреНрд╖рдг рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХрд░реЗрдВ',
                totalPatients: 'рдХреБрд▓ рд░реЛрдЧреА',
                reports: 'рд░рд┐рдкреЛрд░реНрдЯ',
                critical: 'рдЧрдВрднреАрд░',
                patientRecords: 'рд░реЛрдЧреА рд░рд┐рдХреЙрд░реНрдб',
                addNote: 'рдХреНрд▓рд┐рдирд┐рдХрд▓ рдиреЛрдЯ рдЬреЛрдбрд╝реЗрдВ',
                saveNote: 'рдиреЛрдЯ рд╕рд╣реЗрдЬреЗрдВ',
                noSymptoms: 'рдХреЛрдИ рд▓рдХреНрд╖рдг рдЪрдпрдирд┐рдд рдирд╣реАрдВ',
                loginFirst: 'рдХреГрдкрдпрд╛ рдкрд╣рд▓реЗ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ',
                selectSymptoms: 'рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рдг рдЪреБрдиреЗрдВ',
                analysisComplete: 'рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдкреВрд░рд╛ рд╣реБрдЖ!',
                diagnosisReport: 'рдирд┐рджрд╛рди рд░рд┐рдкреЛрд░реНрдЯ',
                matchedSymptoms: 'рдорд┐рд▓рд╛рди рд▓рдХреНрд╖рдг',
                advice: 'рд╕рд▓рд╛рд╣',
                homeRemedies: 'рдШрд░реЗрд▓реВ рдЙрдкрдЪрд╛рд░',
                warningSigns: 'рдЪреЗрддрд╛рд╡рдиреА рд╕рдВрдХреЗрдд',
                printReport: 'рд░рд┐рдкреЛрд░реНрдЯ рдкреНрд░рд┐рдВрдЯ рдХрд░реЗрдВ',
                loginSuccess: 'рд▓реЙрдЧрд┐рди рд╕рдлрд▓!',
                invalidCred: 'рдЧрд▓рдд рд░реЛрдЧреА рдЖрдИрдбреА рдпрд╛ рдкрд╛рд╕рд╡рд░реНрдб',
                doctorLoginSuccess: 'рдбреЙрдХреНрдЯрд░ рд▓реЙрдЧрд┐рди рд╕рдлрд▓!',
                invalidDoctorCred: 'рдЧрд▓рдд рдбреЙрдХреНрдЯрд░ рдЖрдИрдбреА рдпрд╛ рдкрд╛рд╕рд╡рд░реНрдб',
                logoutSuccess: 'рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд▓реЙрдЧрдЖрдЙрдЯ рдХрд┐рдпрд╛',
                voiceCaptured: 'рдЖрд╡рд╛рдЬ рдХреИрдкреНрдЪрд░ рд╣реБрдИ!',
                noRecords: 'рдЕрднреА рддрдХ рдХреЛрдИ рд░реЛрдЧреА рд░рд┐рдХреЙрд░реНрдб рдирд╣реАрдВ',
                visits: 'рд╡рд┐рдЬрд╝рд┐рдЯ',
                viewDetails: 'рд╡рд┐рд╡рд░рдг рджреЗрдЦреЗрдВ',
                noteSaved: 'рдиреЛрдЯ рд╕рдлрд▓рддрд╛рдкреВрд░реНрд╡рдХ рд╕рд╣реЗрдЬрд╛ рдЧрдпрд╛',
                loginWithId: 'рдЕрдкрдиреЗ рд░реЛрдЧреА рдЖрдИрдбреА рд╕реЗ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ',
                cough: 'рдЦрд╛рдВрд╕реА',
                fever: 'рдмреБрдЦрд╛рд░',
                headache: 'рд╕рд┐рд░рджрд░реНрдж',
                bodyAche: 'рд╢рд░реАрд░ рджрд░реНрдж'
            },
            ta: {
                patientLogin: 'роирпЛропро╛ро│ро┐ роЙро│рпНроирпБро┤рпИро╡рпБ',
                patientSubtitle: 'роЙроЩрпНроХро│рпН роирпЛропро╛ро│ро┐ роРроЯро┐ропрпБроЯройрпН роЙро│рпНроирпБро┤рпИроХ',
                doctorLogin: 'рооро░рпБродрпНродрпБро╡ро░рпН роЙро│рпНроирпБро┤рпИро╡рпБ',
                doctorSubtitle: 'роЙроЩрпНроХро│рпН рооро░рпБродрпНродрпБро╡ро░рпН роРроЯро┐ропрпБроЯройрпН роЙро│рпНроирпБро┤рпИроХ',
                patientLoginBtn: 'роирпЛропро╛ро│ро┐ропро╛роХ роЙро│рпНроирпБро┤рпИроХ',
                doctorLoginBtn: 'рооро░рпБродрпНродрпБро╡ро░ро╛роХ роЙро│рпНроирпБро┤рпИроХ',
                demoPatients: 'роХро┐роЯрпИроХрпНроХрпБроорпН роирпЛропро╛ро│ро┐ роРроЯро┐роХро│рпН:',
                demoDoctors: 'роХро┐роЯрпИроХрпНроХрпБроорпН рооро░рпБродрпНродрпБро╡ро░рпН роРроЯро┐роХро│рпН:',
                logout: 'ро╡рпЖро│ро┐ропрпЗро▒рпБ',
                totalVisits: 'роорпКродрпНрод ро╡ро░рпБроХрпИроХро│рпН',
                diagnoses: 'роирпЛропро▒ро┐родро▓рпНроХро│рпН',
                highRisk: 'роЕродро┐роХ роЖрокродрпНродрпБ',
                today: 'роЗройрпНро▒рпБ',
                patientInfo: 'роирпЛропро╛ро│ро┐ родроХро╡ро▓рпН',
                male: 'роЖрогрпН',
                female: 'рокрпЖрогрпН',
                other: 'рооро▒рпНро▒ро╡рпИ',
                selectDistrict: 'рооро╛ро╡роЯрпНроЯродрпНродрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН',
                symptomChecker: 'роЕро▒ро┐роХрпБро▒ро┐ роЪро░ро┐рокро╛ро░рпНрокрпНрокро╛ройрпН (60+ роЕро▒ро┐роХрпБро▒ро┐роХро│рпН)',
                all: 'роЕройрпИродрпНродрпБроорпН',
                respiratory: 'роЪрпБро╡ро╛роЪроорпН',
                digestive: 'роЪрпЖро░ро┐рооро╛ройроорпН',
                neurological: 'роиро░роорпНрокро┐ропро▓рпН',
                muscular: 'родроЪрпИ',
                skin: 'родрпЛро▓рпН',
                cardiovascular: 'роЗродропроорпН',
                general: 'рокрпКродрпБ',
                urinary: 'роЪро┐ро▒рпБроирпАро░рпН',
                selectedSymptoms: 'родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХрокрпНрокроЯрпНроЯ роЕро▒ро┐роХрпБро▒ро┐роХро│рпН:',
                voiceRecorder: 'роХрпБро░ро▓рпН роЕро▒ро┐роХрпБро▒ро┐ рокродро┐ро╡ро┐',
                analyze: 'роЕро▒ро┐роХрпБро▒ро┐роХро│рпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНропрпБроЩрпНроХро│рпН',
                totalPatients: 'роорпКродрпНрод роирпЛропро╛ро│ро┐роХро│рпН',
                reports: 'роЕро▒ро┐роХрпНроХрпИроХро│рпН',
                critical: 'роорпБроХрпНроХро┐ропрооро╛рой',
                patientRecords: 'роирпЛропро╛ро│ро┐ рокродро┐ро╡рпБроХро│рпН',
                addNote: 'рооро░рпБродрпНродрпБро╡ роХрпБро▒ро┐рокрпНрокрпБ роЪрпЗро░рпНроХрпНроХро╡рпБроорпН',
                saveNote: 'роХрпБро▒ро┐рокрпНрокрпИ роЪрпЗрооро┐роХрпНроХро╡рпБроорпН',
                noSymptoms: 'роЕро▒ро┐роХрпБро▒ро┐роХро│рпН роОродрпБро╡рпБроорпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХрокрпНрокроЯро╡ро┐ро▓рпНро▓рпИ',
                loginFirst: 'роорпБродро▓ро┐ро▓рпН роЙро│рпНроирпБро┤рпИропро╡рпБроорпН',
                selectSymptoms: 'роЕро▒ро┐роХрпБро▒ро┐роХро│рпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН',
                analysisComplete: 'рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роорпБроЯро┐роирпНродродрпБ!',
                diagnosisReport: 'роирпЛропро▒ро┐родро▓рпН роЕро▒ро┐роХрпНроХрпИ',
                matchedSymptoms: 'рокрпКро░рпБроирпНродро┐роп роЕро▒ро┐роХрпБро▒ро┐роХро│рпН',
                advice: 'роЖро▓рпЛроЪройрпИ',
                homeRemedies: 'ро╡рпАроЯрпНроЯрпБ ро╡рпИродрпНродро┐ропроорпН',
                warningSigns: 'роОроЪрпНроЪро░ро┐роХрпНроХрпИ роЕро▒ро┐роХрпБро▒ро┐роХро│рпН',
                printReport: 'роЕро▒ро┐роХрпНроХрпИропрпИ роЕроЪрпНроЪро┐роЯрпБроХ',
                loginSuccess: 'роЙро│рпНроирпБро┤рпИро╡рпБ ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛ройродрпБ!',
                invalidCred: 'родро╡ро▒ро╛рой роирпЛропро╛ро│ро┐ роРроЯро┐ роЕро▓рпНро▓родрпБ роХроЯро╡рпБроЪрпНроЪрпКро▓рпН',
                doctorLoginSuccess: 'рооро░рпБродрпНродрпБро╡ро░рпН роЙро│рпНроирпБро┤рпИро╡рпБ ро╡рпЖро▒рпНро▒ро┐роХро░рооро╛ройродрпБ!',
                invalidDoctorCred: 'родро╡ро▒ро╛рой рооро░рпБродрпНродрпБро╡ро░рпН роРроЯро┐ роЕро▓рпНро▓родрпБ роХроЯро╡рпБроЪрпНроЪрпКро▓рпН',
                logoutSuccess: 'ро╡рпЖро│ро┐ропрпЗро▒ро┐ропродрпБ',
                voiceCaptured: 'роХрпБро░ро▓рпН рокродро┐ро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпНроЯродрпБ!',
                noRecords: 'роЗродрпБро╡ро░рпИ роирпЛропро╛ро│ро┐ рокродро┐ро╡рпБроХро│рпН роЗро▓рпНро▓рпИ',
                visits: 'ро╡ро░рпБроХрпИроХро│рпН',
                viewDetails: 'ро╡ро┐ро╡ро░роЩрпНроХро│рпИроХрпН роХро╛рогрпНроХ',
                noteSaved: 'роХрпБро▒ро┐рокрпНрокрпБ роЪрпЗрооро┐роХрпНроХрокрпНрокроЯрпНроЯродрпБ',
                loginWithId: 'роЙроЩрпНроХро│рпН роирпЛропро╛ро│ро┐ роРроЯро┐ропрпБроЯройрпН роЙро│рпНроирпБро┤рпИроХ',
                cough: 'роЗро░рпБрооро▓рпН',
                fever: 'роХро╛ропрпНроЪрпНроЪро▓рпН',
                headache: 'родро▓рпИро╡ро▓ро┐',
                bodyAche: 'роЙроЯро▓рпН ро╡ро▓ро┐'
            }
        };

        // ==================== PATIENTS DATABASE WITH UNIQUE IDs ====================
        let patients = [
            { id: 'PAT001', name: 'Rahul Sharma', email: 'rahul@example.com', phone: '9876543210', password: 'patient123', age: 32, gender: 'male', district: 'Chennai' },
            { id: 'PAT002', name: 'Priya Patel', email: 'priya@example.com', phone: '8765432109', password: 'priya123', age: 28, gender: 'female', district: 'Coimbatore' },
            { id: 'PAT003', name: 'Amit Kumar', email: 'amit@example.com', phone: '7654321098', password: 'amit123', age: 45, gender: 'male', district: 'Madurai' },
            { id: 'PAT004', name: 'Sunita Reddy', email: 'sunita@example.com', phone: '6543210987', password: 'sunita123', age: 35, gender: 'female', district: 'Salem' },
            { id: 'PAT005', name: 'Vikram Singh', email: 'vikram@example.com', phone: '5432109876', password: 'vikram123', age: 52, gender: 'male', district: 'Tirunelveli' },
            { id: 'PAT006', name: 'Lakshmi Nair', email: 'lakshmi@example.com', phone: '4321098765', password: 'lakshmi123', age: 29, gender: 'female', district: 'Kanyakumari' },
            { id: 'PAT007', name: 'Rajesh Kumar', email: 'rajesh@example.com', phone: '3210987654', password: 'rajesh123', age: 41, gender: 'male', district: 'Vellore' },
            { id: 'PAT008', name: 'Meera Sharma', email: 'meera@example.com', phone: '2109876543', password: 'meera123', age: 33, gender: 'female', district: 'Erode' },
            { id: 'PAT009', name: 'Arjun Reddy', email: 'arjun@example.com', phone: '1098765432', password: 'arjun123', age: 38, gender: 'male', district: 'Thoothukkudi' },
            { id: 'PAT010', name: 'Kavita Singh', email: 'kavita@example.com', phone: '9988776655', password: 'kavita123', age: 27, gender: 'female', district: 'Dharmapuri' }
        ];

        // ==================== DOCTORS DATABASE WITH UNIQUE IDs ====================
        let doctors = [
            { id: 'DOC001', name: 'Dr. Sharma', email: 'dr.sharma@hospital.com', phone: '9876543211', password: 'doctor123', specialty: 'General Physician' },
            { id: 'DOC002', name: 'Dr. Gupta', email: 'dr.gupta@hospital.com', phone: '9876543212', password: 'doctor123', specialty: 'Cardiologist' },
            { id: 'DOC003', name: 'Dr. Verma', email: 'dr.verma@hospital.com', phone: '9876543213', password: 'doctor123', specialty: 'Pediatrician' },
            { id: 'DOC004', name: 'Dr. Reddy', email: 'dr.reddy@hospital.com', phone: '9876543214', password: 'doctor123', specialty: 'Neurologist' },
            { id: 'DOC005', name: 'Dr. Nair', email: 'dr.nair@hospital.com', phone: '9876543215', password: 'doctor123', specialty: 'Dermatologist' },
            { id: 'DOC006', name: 'Dr. Kumar', email: 'dr.kumar@hospital.com', phone: '9876543216', password: 'doctor123', specialty: 'Orthopedic' },
            { id: 'DOC007', name: 'Dr. Singh', email: 'dr.singh@hospital.com', phone: '9876543217', password: 'doctor123', specialty: 'Psychiatrist' },
            { id: 'DOC008', name: 'Dr. Patel', email: 'dr.patel@hospital.com', phone: '9876543218', password: 'doctor123', specialty: 'Gynecologist' },
            { id: 'DOC009', name: 'Dr. Menon', email: 'dr.menon@hospital.com', phone: '9876543219', password: 'doctor123', specialty: 'ENT Specialist' },
            { id: 'DOC010', name: 'Dr. Iyer', email: 'dr.iyer@hospital.com', phone: '9876543220', password: 'doctor123', specialty: 'Ophthalmologist' }
        ];

        let diagnoses = JSON.parse(localStorage.getItem('diagnoses')) || [];
        let currentPatient = null;
        let currentDoctor = null;

        // ==================== 60+ SYMPTOMS DATABASE ====================
        const symptomsDB = [
            // Respiratory (1-10)
            { id: 1, name: 'cough', category: 'respiratory' },
            { id: 2, name: 'shortnessOfBreath', category: 'respiratory' },
            { id: 3, name: 'wheezing', category: 'respiratory' },
            { id: 4, name: 'chestPain', category: 'respiratory' },
            { id: 5, name: 'soreThroat', category: 'respiratory' },
            { id: 6, name: 'runnyNose', category: 'respiratory' },
            { id: 7, name: 'sneezing', category: 'respiratory' },
            { id: 8, name: 'nasalCongestion', category: 'respiratory' },
            { id: 9, name: 'coughingBlood', category: 'respiratory' },
            { id: 10, name: 'dryCough', category: 'respiratory' },
            
            // Digestive (11-20)
            { id: 11, name: 'nausea', category: 'digestive' },
            { id: 12, name: 'vomiting', category: 'digestive' },
            { id: 13, name: 'diarrhea', category: 'digestive' },
            { id: 14, name: 'constipation', category: 'digestive' },
            { id: 15, name: 'abdominalPain', category: 'digestive' },
            { id: 16, name: 'bloating', category: 'digestive' },
            { id: 17, name: 'heartburn', category: 'digestive' },
            { id: 18, name: 'lossOfAppetite', category: 'digestive' },
            { id: 19, name: 'bloodInStool', category: 'digestive' },
            { id: 20, name: 'difficultySwallowing', category: 'digestive' },
            
            // Neurological (21-30)
            { id: 21, name: 'headache', category: 'neurological' },
            { id: 22, name: 'dizziness', category: 'neurological' },
            { id: 23, name: 'confusion', category: 'neurological' },
            { id: 24, name: 'seizures', category: 'neurological' },
            { id: 25, name: 'tremors', category: 'neurological' },
            { id: 26, name: 'numbness', category: 'neurological' },
            { id: 27, name: 'weakness', category: 'neurological' },
            { id: 28, name: 'memoryLoss', category: 'neurological' },
            { id: 29, name: 'balanceProblems', category: 'neurological' },
            { id: 30, name: 'slurredSpeech', category: 'neurological' },
            
            // Muscular (31-37)
            { id: 31, name: 'jointPain', category: 'muscular' },
            { id: 32, name: 'musclePain', category: 'muscular' },
            { id: 33, name: 'backPain', category: 'muscular' },
            { id: 34, name: 'neckPain', category: 'muscular' },
            { id: 35, name: 'jointSwelling', category: 'muscular' },
            { id: 36, name: 'stiffness', category: 'muscular' },
            { id: 37, name: 'muscleCramps', category: 'muscular' },
            
            // Skin (38-44)
            { id: 38, name: 'rash', category: 'skin' },
            { id: 39, name: 'itching', category: 'skin' },
            { id: 40, name: 'hives', category: 'skin' },
            { id: 41, name: 'drySkin', category: 'skin' },
            { id: 42, name: 'skinRedness', category: 'skin' },
            { id: 43, name: 'skinDiscoloration', category: 'skin' },
            { id: 44, name: 'woundsNotHealing', category: 'skin' },
            
            // General (45-52)
            { id: 45, name: 'fever', category: 'general' },
            { id: 46, name: 'fatigue', category: 'general' },
            { id: 47, name: 'chills', category: 'general' },
            { id: 48, name: 'nightSweats', category: 'general' },
            { id: 49, name: 'weightLoss', category: 'general' },
            { id: 50, name: 'weightGain', category: 'general' },
            { id: 51, name: 'dehydration', category: 'general' },
            { id: 52, name: 'swollenLymphNodes', category: 'general' },
            { id: 53, name: 'bodyAche', category: 'general' },
            
            // Cardiovascular (54-57)
            { id: 54, name: 'palpitations', category: 'cardiovascular' },
            { id: 55, name: 'highBP', category: 'cardiovascular' },
            { id: 56, name: 'lowBP', category: 'cardiovascular' },
            { id: 57, name: 'swollenAnkles', category: 'cardiovascular' },
            
            // Urinary (58-61)
            { id: 58, name: 'frequentUrination', category: 'urinary' },
            { id: 59, name: 'painfulUrination', category: 'urinary' },
            { id: 60, name: 'bloodInUrine', category: 'urinary' },
            { id: 61, name: 'urgentUrination', category: 'urinary' }
        ];

        // Diseases Database
        const diseasesDB = [
            {
                id: 1,
                name: 'Common Cold',
                symptoms: [1, 5, 6, 7, 8, 10, 45],
                severity: 'low',
                description: 'Mild viral infection of upper respiratory tract',
                advice: ['Rest and drink warm fluids', 'Take steam inhalation', 'Use saline nasal spray'],
                homeRemedies: ['Ginger tea with honey', 'Warm water gargle', 'Steam with menthol'],
                warningSigns: ['High fever above 101┬░F', 'Difficulty breathing', 'Symptoms > 10 days']
            },
            {
                id: 2,
                name: 'Viral Fever',
                symptoms: [45, 46, 47, 53, 21],
                severity: 'medium',
                description: 'Common viral infection causing fever and body ache',
                advice: ['Complete rest', 'Take paracetamol for fever', 'Stay hydrated'],
                homeRemedies: ['Warm turmeric milk', 'Herbal tea', 'Cold compress for fever'],
                warningSigns: ['Very high fever >103┬░F', 'Severe headache', 'Confusion']
            },
            {
                id: 3,
                name: 'Food Poisoning',
                symptoms: [11, 12, 13, 15, 45],
                severity: 'medium',
                description: 'Infection from contaminated food or water',
                advice: ['Drink ORS solution', 'Eat bland foods', 'Avoid spicy/oily food'],
                homeRemedies: ['Coconut water', 'Ginger tea', 'Rice water (kanji)'],
                warningSigns: ['Blood in vomit/stool', 'Severe dehydration', 'Unable to keep fluids']
            },
            {
                id: 4,
                name: 'Migraine',
                symptoms: [21, 22, 25, 27, 29],
                severity: 'medium',
                description: 'Severe headache disorder',
                advice: ['Rest in dark quiet room', 'Avoid bright lights', 'Apply cold compress'],
                homeRemedies: ['Peppermint oil on temples', 'Ginger tea', 'Caffeine in small amounts'],
                warningSigns: ['Sudden severe headache', 'Headache with fever', 'Neurological symptoms']
            },
            {
                id: 5,
                name: 'Pneumonia',
                symptoms: [1, 2, 3, 4, 45, 46, 48],
                severity: 'high',
                description: 'Infection of the lungs',
                advice: ['Immediate medical attention', 'Complete bed rest', 'Take prescribed antibiotics'],
                homeRemedies: ['Steam inhalation', 'Warm compress for chest', 'Honey for cough'],
                warningSigns: ['Severe difficulty breathing', 'Blue lips or face', 'Chest pain', 'High fever']
            },
            {
                id: 6,
                name: 'Hypertension',
                symptoms: [21, 22, 46, 54, 55],
                severity: 'high',
                description: 'High blood pressure',
                advice: ['Reduce salt intake', 'Regular exercise', 'Stress management', 'Monitor BP daily'],
                homeRemedies: ['Garlic', 'Hibiscus tea', 'Bananas for potassium', 'Deep breathing'],
                warningSigns: ['Severe headache', 'Chest pain', 'Shortness of breath', 'Vision changes']
            },
            {
                id: 7,
                name: 'Arthritis',
                symptoms: [31, 32, 35, 36, 37, 46],
                severity: 'medium',
                description: 'Inflammation of joints',
                advice: ['Gentle exercise like walking', 'Apply hot/cold packs', 'Maintain healthy weight'],
                homeRemedies: ['Epsom salt baths', 'Turmeric milk', 'Ginger compress', 'Warm oil massage'],
                warningSigns: ['Severe joint pain', 'Joint deformity', 'Inability to move joint', 'Fever']
            },
            {
                id: 8,
                name: 'Urinary Tract Infection',
                symptoms: [58, 59, 60, 61, 45, 46],
                severity: 'medium',
                description: 'Infection in urinary system',
                advice: ['Drink plenty of water', 'Urinate frequently', 'Empty bladder completely'],
                homeRemedies: ['Cranberry juice', 'Probiotic yogurt', 'Vitamin C rich foods', 'Warm compress'],
                warningSigns: ['Blood in urine', 'High fever', 'Severe back pain', 'Nausea and vomiting']
            },
            {
                id: 9,
                name: 'Influenza',
                symptoms: [1, 2, 45, 46, 47, 53, 21],
                severity: 'medium',
                description: 'Viral infection affecting respiratory system',
                advice: ['Complete bed rest', 'Isolate to prevent spreading', 'Drink plenty of fluids'],
                homeRemedies: ['Warm turmeric milk', 'Honey and ginger tea', 'Garlic soup', 'Steam inhalation'],
                warningSigns: ['Difficulty breathing', 'Chest pain', 'Confusion', 'Severe vomiting']
            },
            {
                id: 10,
                name: 'Gastroenteritis',
                symptoms: [11, 12, 13, 15, 18, 45, 46],
                severity: 'medium',
                description: 'Stomach and intestinal inflammation',
                advice: ['Drink ORS solution frequently', 'Eat bland foods like bananas, rice', 'Avoid dairy and spicy foods'],
                homeRemedies: ['Coconut water for hydration', 'Ginger tea for nausea', 'Mint leaves juice', 'Rice water'],
                warningSigns: ['Severe dehydration', 'Blood in stool', 'High fever', 'Unable to keep fluids down']
            }
        ];

        // Tamil Nadu Districts
        const districts = [
            'Chennai', 'Coimbatore', 'Madurai', 'Tiruchirappalli', 'Salem',
            'Tirunelveli', 'Vellore', 'Erode', 'Kanyakumari', 'Thoothukkudi',
            'Dharmapuri', 'Thanjavur', 'Nagapattinam', 'Kanchipuram', 'Viluppuram',
            'Ariyalur', 'Chengalpattu', 'Cuddalore', 'Dindigul', 'Kallakurichi',
            'Karur', 'Krishnagiri', 'Mayiladuthurai', 'Namakkal', 'Nilgiris',
            'Perambalur', 'Pudukkottai', 'Ramanathapuram', 'Ranipet', 'Sivaganga',
            'Tenkasi', 'Theni', 'Tirupathur', 'Tiruppur', 'Tiruvallur',
            'Tiruvannamalai', 'Tiruvarur', 'Virudhunagar'
        ];

        let selectedSymptoms = [];
        let currentCategory = 'all';
        let isRecording = false;
        let recordingTimer = null;
        let recordingSeconds = 0;

        // ==================== INIT ====================
        document.addEventListener('DOMContentLoaded', () => {
            loadDistricts();
            displaySymptoms('all');
            updateAllStats();
            applyLanguage('en');
            
            // Pre-fill with first demo IDs
            document.getElementById('patientId').value = 'PAT001';
            document.getElementById('patientPassword').value = 'patient123';
            document.getElementById('doctorId').value = 'DOC001';
            document.getElementById('doctorPassword').value = 'doctor123';
        });

        function loadDistricts() {
            const select = document.getElementById('district');
            select.innerHTML = '<option value="">' + getTranslation('selectDistrict') + '</option>';
            districts.forEach(d => {
                const option = document.createElement('option');
                option.value = d;
                option.textContent = d;
                select.appendChild(option);
            });
        }

        // ==================== LANGUAGE FUNCTIONS ====================
        function switchLanguage(lang) {
            currentLanguage = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            applyLanguage(lang);
            showToast('Language switched to ' + lang.toUpperCase());
        }

        function applyLanguage(lang) {
            const t = translations[lang] || translations.en;
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if (t[key]) {
                    if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') {
                        el.placeholder = t[key];
                    } else if (el.tagName === 'OPTION') {
                        el.textContent = t[key];
                    } else {
                        el.textContent = t[key];
                    }
                }
            });

            displaySymptoms(currentCategory);
            updateSymptomTags();
        }

        function getTranslation(key) {
            return translations[currentLanguage]?.[key] || translations.en[key] || key;
        }

        // ==================== PATIENT LOGIN (Using Patient ID only) ====================
        function patientLogin() {
            const patientId = document.getElementById('patientId').value.trim();
            const password = document.getElementById('patientPassword').value.trim();
            
            // Find patient by ID only (as requested)
            let patient = patients.find(p => p.id === patientId);
            
            if (patient && patient.password === password) {
                currentPatient = patient;
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('patientApp').classList.add('visible');
                document.getElementById('doctorApp').classList.remove('visible');
                
                document.getElementById('patientName').textContent = patient.name;
                document.getElementById('patientID').textContent = patient.id;
                document.getElementById('patientEmail').textContent = patient.email;
                document.getElementById('patientPhone').textContent = patient.phone;
                document.getElementById('fullName').value = patient.name;
                document.getElementById('age').value = patient.age;
                document.getElementById('gender').value = patient.gender;
                if (patient.district) {
                    document.getElementById('district').value = patient.district;
                }
                
                updatePatientStats();
                showToast(getTranslation('loginSuccess') + ' Welcome ' + patient.name, 'success');
            } else {
                showToast(getTranslation('invalidCred'), 'error');
            }
        }

        // ==================== DOCTOR LOGIN (Using Doctor ID only) ====================
        function doctorLogin() {
            const doctorId = document.getElementById('doctorId').value.trim();
            const password = document.getElementById('doctorPassword').value.trim();
            
            // Find doctor by ID only (as requested)
            let doctor = doctors.find(d => d.id === doctorId);
            
            if (doctor && doctor.password === password) {
                currentDoctor = doctor;
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('doctorApp').classList.add('visible');
                document.getElementById('patientApp').classList.remove('visible');
                
                document.getElementById('doctorName').textContent = doctor.name;
                document.getElementById('doctorID').textContent = doctor.id;
                document.getElementById('doctorEmail').textContent = doctor.email;
                document.getElementById('doctorPhone').textContent = doctor.phone;
                
                displayPatientRecords();
                updateDoctorStats();
                showToast(getTranslation('doctorLoginSuccess') + ' Welcome ' + doctor.name, 'success');
            } else {
                showToast(getTranslation('invalidDoctorCred'), 'error');
            }
        }

        // ==================== LOGOUT ====================
        function logout(type) {
            if (type === 'patient') {
                currentPatient = null;
                document.getElementById('patientApp').classList.remove('visible');
            } else {
                currentDoctor = null;
                document.getElementById('doctorApp').classList.remove('visible');
            }
            document.getElementById('loginPage').style.display = 'grid';
            showToast(getTranslation('logoutSuccess'));
        }

        // ==================== SYMPTOMS ====================
        function displaySymptoms(category) {
            const grid = document.getElementById('symptomsGrid');
            grid.innerHTML = '';
            
            const filtered = category === 'all' ? symptomsDB : symptomsDB.filter(s => s.category === category);
            
            filtered.forEach(symptom => {
                const item = document.createElement('div');
                item.className = `symptom-item ${selectedSymptoms.includes(symptom.id) ? 'selected' : ''}`;
                item.onclick = () => toggleSymptom(symptom.id);
                item.innerHTML = `<span>${getTranslation(symptom.name)}</span>`;
                grid.appendChild(item);
            });
        }

        function filterSymptoms(category) {
            currentCategory = category;
            document.querySelectorAll('.category-tab').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            displaySymptoms(category);
        }

        function toggleSymptom(id) {
            const index = selectedSymptoms.indexOf(id);
            if (index === -1) selectedSymptoms.push(id);
            else selectedSymptoms.splice(index, 1);
            updateSymptomTags();
            displaySymptoms(currentCategory);
        }

        function updateSymptomTags() {
            const container = document.getElementById('symptomTags');
            if (selectedSymptoms.length === 0) {
                container.innerHTML = '<p style="color: var(--gray);">' + getTranslation('noSymptoms') + '</p>';
                return;
            }
            
            container.innerHTML = '';
            selectedSymptoms.forEach(id => {
                const symptom = symptomsDB.find(s => s.id === id);
                if (symptom) {
                    const tag = document.createElement('span');
                    tag.className = 'symptom-tag';
                    tag.innerHTML = `${getTranslation(symptom.name)} <button onclick="removeSymptom(${id})">├Ч</button>`;
                    container.appendChild(tag);
                }
            });
        }

        function removeSymptom(id) {
            const index = selectedSymptoms.indexOf(id);
            if (index !== -1) {
                selectedSymptoms.splice(index, 1);
                updateSymptomTags();
                displaySymptoms(currentCategory);
            }
        }

        // ==================== VOICE RECORDING ====================
        function toggleRecording() {
            if (!isRecording) {
                isRecording = true;
                document.getElementById('recordBtn').classList.add('recording');
                document.getElementById('recordBtn').innerHTML = '<i class="fas fa-stop"></i>';
                
                recordingSeconds = 0;
                recordingTimer = setInterval(() => {
                    recordingSeconds++;
                    const mins = Math.floor(recordingSeconds / 60);
                    const secs = recordingSeconds % 60;
                    document.getElementById('timer').textContent = 
                        `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                }, 1000);
                
                setTimeout(() => {
                    if (isRecording) {
                        toggleRecording();
                        document.getElementById('typedSymptoms').value = 'fever, cough, headache';
                        showToast(getTranslation('voiceCaptured'));
                    }
                }, 3000);
            } else {
                clearInterval(recordingTimer);
                isRecording = false;
                document.getElementById('recordBtn').classList.remove('recording');
                document.getElementById('recordBtn').innerHTML = '<i class="fas fa-microphone"></i>';
            }
        }

        // ==================== AI DIAGNOSIS ====================
        function analyzeHealth() {
            if (!currentPatient) {
                showToast(getTranslation('loginFirst'), 'error');
                return;
            }

            const typedText = document.getElementById('typedSymptoms').value.toLowerCase();
            if (typedText) {
                const words = typedText.split(',').map(w => w.trim());
                words.forEach(word => {
                    for (let symptom of symptomsDB) {
                        const symptomName = getTranslation(symptom.name).toLowerCase();
                        if (symptomName.includes(word) && !selectedSymptoms.includes(symptom.id)) {
                            selectedSymptoms.push(symptom.id);
                            break;
                        }
                    }
                });
                updateSymptomTags();
            }

            if (selectedSymptoms.length === 0) {
                showToast(getTranslation('selectSymptoms'), 'error');
                return;
            }

            let bestMatch = diseasesDB[0];
            let bestScore = 0;

            diseasesDB.forEach(disease => {
                const matches = disease.symptoms.filter(s => selectedSymptoms.includes(s)).length;
                const score = (matches / disease.symptoms.length) * 100;
                if (score > bestScore) {
                    bestScore = score;
                    bestMatch = disease;
                }
            });

            displayResults(bestMatch, selectedSymptoms);

            const diagnosis = {
                id: Date.now(),
                patientId: currentPatient.id,
                patientName: currentPatient.name,
                patientEmail: currentPatient.email,
                patientPhone: currentPatient.phone,
                diagnosis: bestMatch.name,
                severity: bestMatch.severity,
                symptoms: selectedSymptoms.map(id => {
                    const s = symptomsDB.find(sym => sym.id === id);
                    return s ? getTranslation(s.name) : '';
                }),
                date: new Date().toISOString(),
                doctorNote: ''
            };

            diagnoses.push(diagnosis);
            localStorage.setItem('diagnoses', JSON.stringify(diagnoses));
            updatePatientStats();
            updateDoctorStats(); // Update doctor stats when new diagnosis is added
            
            showToast(getTranslation('analysisComplete'));
        }

        function displayResults(disease, symptoms) {
            const resultsDiv = document.getElementById('results');
            const matched = disease.symptoms.filter(id => symptoms.includes(id))
                .map(id => {
                    const s = symptomsDB.find(sym => sym.id === id);
                    return s ? getTranslation(s.name) : '';
                });
            
            let html = `
                <h2 style="color: var(--primary); margin-bottom: 20px;">${getTranslation('diagnosisReport')}</h2>
                <div style="margin-bottom: 20px;">
                    <h3>${disease.name}</h3>
                    <span class="severity-badge severity-${disease.severity}">${disease.severity.toUpperCase()}</span>
                    <p style="margin-top: 10px;">${disease.description}</p>
                </div>
                <div style="margin: 20px 0;">
                    <h4>тЬЕ ${getTranslation('matchedSymptoms')}:</h4>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                        ${matched.map(s => `<span style="background: var(--success); color: white; padding: 5px 15px; border-radius: 20px;">${s}</span>`).join('')}
                    </div>
                </div>
                <div style="margin: 20px 0;">
                    <h4>ЁЯУЛ ${getTranslation('advice')}:</h4>
                    <ul>${disease.advice.map(a => `<li>${a}</li>`).join('')}</ul>
                </div>
                <div style="margin: 20px 0;">
                    <h4>ЁЯПа ${getTranslation('homeRemedies')}:</h4>
                    <ul>${disease.homeRemedies.map(r => `<li>${r}</li>`).join('')}</ul>
                </div>
            `;
            
            if (disease.severity === 'high') {
                html += `
                    <div style="background: #FFEBEE; padding: 20px; border-radius: 20px; margin: 20px 0;">
                        <h4 style="color: var(--danger);">тЪая╕П ${getTranslation('warningSigns')}</h4>
                        <ul>${disease.warningSigns.map(w => `<li>${w}</li>`).join('')}</ul>
                    </div>
                `;
            }
            
            html += `<button class="login-btn" onclick="window.print()" style="width: auto;">${getTranslation('printReport')}</button>`;
            
            resultsDiv.innerHTML = html;
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // ==================== STATS ====================
        function updatePatientStats() {
            const patientDiagnoses = diagnoses.filter(d => d.patientId === currentPatient?.id);
            document.getElementById('totalVisits').textContent = patientDiagnoses.length;
            document.getElementById('totalDiagnoses').textContent = patientDiagnoses.length;
            document.getElementById('highRiskCount').textContent = patientDiagnoses.filter(d => d.severity === 'high').length;
            document.getElementById('todayCount').textContent = patientDiagnoses.filter(d => 
                new Date(d.date).toDateString() === new Date().toDateString()
            ).length;
        }

        function updateDoctorStats() {
            document.getElementById('totalPatients').textContent = patients.length;
            document.getElementById('totalReports').textContent = diagnoses.length;
            document.getElementById('criticalCases').textContent = diagnoses.filter(d => d.severity === 'high').length;
            document.getElementById('todayPatients').textContent = diagnoses.filter(d => 
                new Date(d.date).toDateString() === new Date().toDateString()
            ).length;
        }

        function updateAllStats() {
            if (currentPatient) updatePatientStats();
            if (currentDoctor) updateDoctorStats();
        }

        // ==================== DOCTOR FUNCTIONS ====================
        function displayPatientRecords() {
            const container = document.getElementById('patientRecordsList');
            
            if (diagnoses.length === 0) {
                container.innerHTML = '<p>' + getTranslation('noRecords') + '</p>';
                return;
            }

            // Group diagnoses by patient
            const patientGroups = {};
            diagnoses.forEach(d => {
                if (!patientGroups[d.patientId]) {
                    patientGroups[d.patientId] = {
                        patientId: d.patientId,
                        patientName: d.patientName,
                        patientEmail: d.patientEmail,
                        patientPhone: d.patientPhone,
                        records: []
                    };
                }
                patientGroups[d.patientId].records.push(d);
            });

            container.innerHTML = '';
            Object.values(patientGroups).forEach(group => {
                const patientDiv = document.createElement('div');
                patientDiv.className = 'patient-record';
                patientDiv.innerHTML = `
                    <div class="patient-info">
                        <h4>${group.patientName}</h4>
                        <p><i class="fas fa-id-card"></i> ID: ${group.patientId}</p>
                        <p><i class="fas fa-envelope"></i> ${group.patientEmail}</p>
                        <p><i class="fas fa-phone"></i> ${group.patientPhone || 'N/A'}</p>
                        <p><i class="fas fa-notes-medical"></i> ${group.records.length} ${getTranslation('visits')}</p>
                    </div>
                    <div>
                        <button class="login-btn" style="width: auto; padding: 10px 20px;" onclick="viewPatientDetails('${group.patientId}')">
                            ${getTranslation('viewDetails')}
                        </button>
                    </div>
                `;
                container.appendChild(patientDiv);
            });
        }

        function viewPatientDetails(patientId) {
            const patientRecords = diagnoses.filter(d => d.patientId === patientId);
            const patient = patients.find(p => p.id === patientId);
            
            let details = `Patient: ${patient?.name || 'Unknown'} (ID: ${patientId})\n`;
            details += `Email: ${patient?.email || 'N/A'}\n`;
            details += `Phone: ${patient?.phone || 'N/A'}\n`;
            details += `Total Visits: ${patientRecords.length}\n`;
            details += `========================\n\n`;
            
            patientRecords.forEach((r, index) => {
                details += `Visit #${index + 1}\n`;
                details += `Date: ${new Date(r.date).toLocaleString()}\n`;
                details += `Diagnosis: ${r.diagnosis}\n`;
                details += `Severity: ${r.severity.toUpperCase()}\n`;
                details += `Symptoms: ${r.symptoms.join(', ')}\n`;
                details += `Doctor Note: ${r.doctorNote || 'None'}\n`;
                details += `------------------------\n`;
            });
            
            alert(details);
        }

        function saveClinicalNote() {
            const note = document.getElementById('clinicalNote').value;
            if (note) {
                showToast(getTranslation('noteSaved'));
                document.getElementById('clinicalNote').value = '';
            } else {
                showToast('Please write a note first', 'error');
            }
        }

        // ==================== TOAST ====================
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = `toast show ${type}`;
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
