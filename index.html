<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>RuralCare Pro - Complete Healthcare Platform</title>
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1e293b;
            --light: #f8fafc;
            --gray: #64748b;
            --border: #e2e8f0;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        /* Language Switcher */
        .language-bar {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 8px;
            background: white;
            padding: 8px 16px;
            border-radius: 40px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        .lang-btn {
            padding: 6px 12px;
            border: none;
            background: transparent;
            color: var(--gray);
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .lang-btn.active {
            background: var(--primary);
            color: white;
        }

        /* Login Page */
        #loginPage {
            width: 100%;
            max-width: 1200px;
            display: block;
        }

        .login-grid {
            display: grid;
            grid-template-columns: 1.2fr 0.8fr;
            gap: 30px;
        }

        .welcome-card {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            border-radius: 40px;
            padding: 50px;
            color: white;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
        }

        .welcome-icon {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .welcome-card h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .feature-list {
            list-style: none;
            margin-top: 30px;
        }

        .feature-list li {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .login-card {
            background: white;
            border-radius: 40px;
            padding: 40px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
        }

        .user-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: var(--light);
            padding: 6px;
            border-radius: 50px;
        }

        .user-tab {
            flex: 1;
            padding: 12px;
            border: none;
            background: transparent;
            color: var(--gray);
            font-weight: 600;
            cursor: pointer;
            border-radius: 40px;
            transition: all 0.3s;
        }

        .user-tab.active {
            background: var(--primary);
            color: white;
        }

        .login-panel {
            display: none;
        }

        .login-panel.active {
            display: block;
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-header h2 {
            color: var(--dark);
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .input-group {
            position: relative;
            margin-bottom: 20px;
        }

        .input-group i {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            z-index: 1;
        }

        .input-group input,
        .input-group select {
            width: 100%;
            padding: 16px 16px 16px 50px;
            border: 2px solid var(--border);
            border-radius: 50px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .otp-row {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .otp-row .input-group {
            flex: 1;
            margin-bottom: 0;
        }

        .otp-btn {
            padding: 0 25px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            white-space: nowrap;
        }

        .otp-btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
        }

        .login-btn {
            width: 100%;
            padding: 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin: 10px 0;
            transition: all 0.3s;
        }

        .login-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .login-btn.secondary {
            background: var(--secondary);
        }

        .divider {
            text-align: center;
            position: relative;
            margin: 30px 0;
        }

        .divider::before,
        .divider::after {
            content: '';
            position: absolute;
            top: 50%;
            width: calc(50% - 30px);
            height: 2px;
            background: var(--border);
        }

        .divider::before { left: 0; }
        .divider::after { right: 0; }
        .divider span { background: white; padding: 0 20px; color: var(--gray); }

        .social-login {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .social-btn {
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 50px;
            background: white;
            cursor: pointer;
            transition: all 0.3s;
        }

        .social-btn:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .demo-box {
            background: var(--light);
            border-radius: 20px;
            padding: 20px;
            margin-top: 20px;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }

        .demo-item {
            padding: 8px 12px;
            background: white;
            border-radius: 12px;
            font-size: 0.9rem;
            border-left: 3px solid var(--primary);
        }

        /* Main App */
        .main-app {
            display: none;
            width: 100%;
            max-width: 1400px;
            background: white;
            border-radius: 40px;
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
        }

        .main-app.visible {
            display: block;
        }

        .app-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            padding: 20px 30px;
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .logout-btn {
            padding: 10px 25px;
            background: rgba(255,255,255,0.2);
            border: 2px solid white;
            color: white;
            border-radius: 40px;
            cursor: pointer;
            font-weight: 600;
        }

        .app-content {
            padding: 30px;
        }

        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: var(--light);
            border-radius: 20px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--dark);
        }

        /* Symptoms */
        .symptoms-section {
            background: var(--light);
            border-radius: 20px;
            padding: 25px;
            margin: 30px 0;
        }

        .category-tabs {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 20px 0;
        }

        .category-tab {
            padding: 10px 20px;
            border: 2px solid var(--primary);
            background: white;
            color: var(--primary);
            border-radius: 30px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .category-tab.active {
            background: var(--primary);
            color: white;
        }

        .symptoms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            max-height: 400px;
            overflow-y: auto;
            padding: 15px;
            background: white;
            border-radius: 20px;
        }

        .symptom-item {
            padding: 12px;
            background: var(--light);
            border-radius: 30px;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s;
            border: 2px solid transparent;
        }

        .symptom-item.selected {
            background: var(--primary);
            color: white;
        }

        .selected-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            padding: 15px;
            background: white;
            border-radius: 20px;
            margin-top: 15px;
            min-height: 70px;
        }

        .symptom-tag {
            background: var(--primary);
            color: white;
            padding: 8px 16px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .symptom-tag button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
        }

        /* Voice */
        .voice-section {
            background: linear-gradient(135deg, #4f46e5, #7c3aed);
            border-radius: 20px;
            padding: 30px;
            color: white;
            margin: 30px 0;
        }

        .voice-controls {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
        }

        .record-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: white;
            color: var(--danger);
            border: none;
            font-size: 2rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .record-btn.recording {
            background: var(--danger);
            color: white;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%,100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .timer {
            font-size: 2rem;
            font-family: monospace;
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 50px;
        }

        .analyze-btn {
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            margin: 30px 0;
        }

        .results-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            display: none;
        }

        .severity-badge {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 30px;
            font-weight: 600;
        }

        .severity-low { background: #dcfce7; color: #166534; }
        .severity-medium { background: #fed7aa; color: #9a3412; }
        .severity-high { background: #fee2e2; color: #991b1b; }

        /* Doctor */
        .patient-record {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 2px solid var(--border);
            cursor: pointer;
        }

        .patient-record:hover {
            border-color: var(--primary);
        }

        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(200px);
            background: white;
            padding: 16px 32px;
            border-radius: 50px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            border-left: 4px solid var(--success);
            transition: transform 0.3s;
            z-index: 2000;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
        }

        .toast.error {
            border-left-color: var(--danger);
        }

        @media (max-width: 768px) {
            .login-grid {
                grid-template-columns: 1fr;
            }
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .social-login {
                grid-template-columns: 1fr;
            }
            .language-bar {
                position: relative;
                top: 0;
                right: 0;
                margin-bottom: 20px;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Language Switcher -->
    <div class="language-bar">
        <button class="lang-btn active" onclick="switchLanguage('en')">EN</button>
        <button class="lang-btn" onclick="switchLanguage('hi')">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
        <button class="lang-btn" onclick="switchLanguage('ta')">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
        <button class="lang-btn" onclick="switchLanguage('te')">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</button>
        <button class="lang-btn" onclick="switchLanguage('kn')">‡≤ï‡≤®‡≥ç‡≤®‡≤°</button>
        <button class="lang-btn" onclick="switchLanguage('ml')">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</button>
    </div>

    <!-- LOGIN PAGE -->
    <div id="loginPage">
        <div class="login-grid">
            <!-- Welcome Card -->
            <div class="welcome-card">
                <div class="welcome-icon">üè•</div>
                <h1>Welcome to RuralCare Pro</h1>
                <p>India's most trusted healthcare platform connecting patients with expert doctors</p>
                <ul class="feature-list">
                    <li><i class="fas fa-check-circle"></i> 50,000+ Happy Patients</li>
                    <li><i class="fas fa-check-circle"></i> 1,000+ Expert Doctors</li>
                    <li><i class="fas fa-check-circle"></i> 24/7 Healthcare Support</li>
                    <li><i class="fas fa-check-circle"></i> AI-Powered Diagnosis</li>
                </ul>
            </div>

            <!-- Login Card -->
            <div class="login-card">
                <div class="user-tabs">
                    <button class="user-tab active" onclick="switchUserType('patient')">üë§ Patient</button>
                    <button class="user-tab" onclick="switchUserType('doctor')">üë®‚Äç‚öïÔ∏è Doctor</button>
                </div>

                <!-- Patient Panel -->
                <div class="login-panel active" id="patientPanel">
                    <div class="login-header">
                        <h2>Patient Login</h2>
                        <p>Access your health records</p>
                    </div>

                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        <input type="text" id="patientEmail" placeholder="Email or Phone" value="patient@demo.com">
                    </div>

                    <div class="otp-row">
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="text" id="patientOtp" placeholder="OTP" maxlength="6">
                        </div>
                        <button class="otp-btn" onclick="sendOtp('patient')" id="patientOtpBtn">Send OTP</button>
                    </div>

                    <button class="login-btn" onclick="loginWithOtp('patient')">Login with OTP</button>

                    <div class="divider"><span>OR</span></div>

                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="patientPassword" placeholder="Password" value="123456">
                    </div>

                    <button class="login-btn secondary" onclick="loginWithPassword('patient')">Login with Password</button>

                    <div class="social-login">
                        <button class="social-btn" onclick="socialLogin('google','patient')"><i class="fab fa-google"></i></button>
                        <button class="social-btn" onclick="socialLogin('facebook','patient')"><i class="fab fa-facebook-f"></i></button>
                        <button class="social-btn" onclick="socialLogin('github','patient')"><i class="fab fa-github"></i></button>
                    </div>

                    <div class="demo-box">
                        <strong>Demo Patients:</strong>
                        <div class="demo-grid">
                            <div class="demo-item">patient@demo.com / 123456</div>
                            <div class="demo-item">rahul@demo.com / 123456</div>
                            <div class="demo-item">priya@demo.com / 123456</div>
                            <div class="demo-item">9876543210 / 123456</div>
                        </div>
                    </div>
                </div>

                <!-- Doctor Panel -->
                <div class="login-panel" id="doctorPanel">
                    <div class="login-header">
                        <h2>Doctor Login</h2>
                        <p>Access patient records</p>
                    </div>

                    <div class="input-group">
                        <i class="fas fa-envelope"></i>
                        <input type="text" id="doctorEmail" placeholder="Email or Phone" value="doctor@demo.com">
                    </div>

                    <div class="otp-row">
                        <div class="input-group">
                            <i class="fas fa-lock"></i>
                            <input type="text" id="doctorOtp" placeholder="OTP" maxlength="6">
                        </div>
                        <button class="otp-btn" onclick="sendOtp('doctor')" id="doctorOtpBtn">Send OTP</button>
                    </div>

                    <button class="login-btn" onclick="loginWithOtp('doctor')">Login with OTP</button>

                    <div class="divider"><span>OR</span></div>

                    <div class="input-group">
                        <i class="fas fa-lock"></i>
                        <input type="password" id="doctorPassword" placeholder="Password" value="123456">
                    </div>

                    <button class="login-btn secondary" onclick="loginWithPassword('doctor')">Login with Password</button>

                    <div class="social-login">
                        <button class="social-btn" onclick="socialLogin('google','doctor')"><i class="fab fa-google"></i></button>
                        <button class="social-btn" onclick="socialLogin('facebook','doctor')"><i class="fab fa-facebook-f"></i></button>
                        <button class="social-btn" onclick="socialLogin('github','doctor')"><i class="fab fa-github"></i></button>
                    </div>

                    <div class="demo-box">
                        <strong>Demo Doctors:</strong>
                        <div class="demo-grid">
                            <div class="demo-item">doctor@demo.com / 123456</div>
                            <div class="demo-item">sharma@hospital.com / 123456</div>
                            <div class="demo-item">gupta@hospital.com / 123456</div>
                            <div class="demo-item">9988776655 / 123456</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- PATIENT APP -->
    <div class="main-app" id="patientApp">
        <div class="app-header">
            <div class="user-info">
                <div class="user-avatar"><i class="fas fa-user"></i></div>
                <div>
                    <h2 id="patientName">Patient Name</h2>
                    <p>ID: <span id="patientId">PAT001</span> | <span id="patientEmail">email</span></p>
                </div>
            </div>
            <button class="logout-btn" onclick="logout('patient')">Logout</button>
        </div>

        <div class="app-content">
            <!-- Stats -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-calendar-check"></i></div>
                    <div>
                        <div class="stat-number" id="patientVisits">0</div>
                        <div>Total Visits</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-notes-medical"></i></div>
                    <div>
                        <div class="stat-number" id="patientDiagnoses">0</div>
                        <div>Diagnoses</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-exclamation-triangle"></i></div>
                    <div>
                        <div class="stat-number" id="patientHighRisk">0</div>
                        <div>High Risk</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-calendar-day"></i></div>
                    <div>
                        <div class="stat-number" id="patientToday">0</div>
                        <div>Today</div>
                    </div>
                </div>
            </div>

            <!-- Patient Info -->
            <div class="patient-form">
                <h3><i class="fas fa-user-circle"></i> Patient Information</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit,minmax(200px,1fr)); gap:15px; margin-top:20px;">
                    <div class="input-group">
                        <i class="fas fa-user"></i>
                        <input type="text" id="fullName" placeholder="Full Name">
                    </div>
                    <div class="input-group">
                        <i class="fas fa-calendar-alt"></i>
                        <input type="number" id="age" placeholder="Age">
                    </div>
                    <div class="input-group">
                        <i class="fas fa-venus-mars"></i>
                        <select id="gender">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <i class="fas fa-map-marker-alt"></i>
                        <select id="district">
                            <option value="">Select District</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Symptoms -->
            <div class="symptoms-section">
                <h3><i class="fas fa-stethoscope"></i> Symptom Checker</h3>
                
                <div class="category-tabs" id="categoryTabs">
                    <button class="category-tab active" onclick="filterSymptoms('all')">All</button>
                    <button class="category-tab" onclick="filterSymptoms('respiratory')">Respiratory</button>
                    <button class="category-tab" onclick="filterSymptoms('digestive')">Digestive</button>
                    <button class="category-tab" onclick="filterSymptoms('neurological')">Neuro</button>
                    <button class="category-tab" onclick="filterSymptoms('general')">General</button>
                </div>

                <div class="symptoms-grid" id="symptomsGrid"></div>

                <h4 style="margin:15px 0 10px">Selected Symptoms:</h4>
                <div class="selected-tags" id="symptomTags"></div>
            </div>

            <!-- Voice -->
            <div class="voice-section">
                <h3><i class="fas fa-microphone-alt"></i> Voice Recorder</h3>
                <div class="voice-controls">
                    <button class="record-btn" id="recordBtn" onclick="toggleRecording()">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <div class="timer" id="timer">00:00</div>
                </div>
                <div style="margin-top:20px;">
                    <div class="input-group">
                        <i class="fas fa-pen"></i>
                        <input type="text" id="typedSymptoms" placeholder="Type symptoms (comma separated)">
                    </div>
                </div>
            </div>

            <!-- Analyze -->
            <button class="analyze-btn" onclick="analyzeHealth()">Analyze Symptoms</button>

            <!-- Results -->
            <div class="results-card" id="results"></div>
        </div>
    </div>

    <!-- DOCTOR APP -->
    <div class="main-app" id="doctorApp">
        <div class="app-header">
            <div class="user-info">
                <div class="user-avatar"><i class="fas fa-user-md"></i></div>
                <div>
                    <h2 id="doctorName">Dr. Name</h2>
                    <p>ID: <span id="doctorId">DOC001</span> | <span id="doctorEmail">email</span></p>
                </div>
            </div>
            <button class="logout-btn" onclick="logout('doctor')">Logout</button>
        </div>

        <div class="app-content">
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-users"></i></div>
                    <div>
                        <div class="stat-number" id="totalPatients">6</div>
                        <div>Total Patients</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-notes-medical"></i></div>
                    <div>
                        <div class="stat-number" id="totalReports">0</div>
                        <div>Reports</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-exclamation-triangle"></i></div>
                    <div>
                        <div class="stat-number" id="criticalCases">0</div>
                        <div>Critical</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon"><i class="fas fa-calendar-day"></i></div>
                    <div>
                        <div class="stat-number" id="todayPatients">0</div>
                        <div>Today</div>
                    </div>
                </div>
            </div>

            <div class="doctor-section">
                <h3><i class="fas fa-clipboard-list"></i> Patient Records</h3>
                <div id="patientRecords" style="margin-top:20px;"></div>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        // ==================== DATA ====================
        let patients = [
            { id: 'PAT001', name: 'Rahul Sharma', email: 'patient@demo.com', phone: '9876543210', password: '123456', age: 32, gender: 'male', district: 'Chennai' },
            { id: 'PAT002', name: 'Priya Patel', email: 'priya@demo.com', phone: '8765432109', password: '123456', age: 28, gender: 'female', district: 'Coimbatore' },
            { id: 'PAT003', name: 'Amit Kumar', email: 'amit@demo.com', phone: '7654321098', password: '123456', age: 45, gender: 'male', district: 'Madurai' }
        ];

        let doctors = [
            { id: 'DOC001', name: 'Dr. Sharma', email: 'doctor@demo.com', phone: '9988776655', password: '123456', specialty: 'General' },
            { id: 'DOC002', name: 'Dr. Gupta', email: 'sharma@hospital.com', phone: '8877665544', password: '123456', specialty: 'Cardio' },
            { id: 'DOC003', name: 'Dr. Verma', email: 'gupta@hospital.com', phone: '7766554433', password: '123456', specialty: 'Neuro' }
        ];

        let diagnoses = JSON.parse(localStorage.getItem('diagnoses')) || [];
        let currentPatient = null;
        let currentDoctor = null;
        let otpStore = {};

        // Symptoms Database
        const symptomsDB = [
            { id: 1, name: 'Cough', category: 'respiratory' },
            { id: 2, name: 'Fever', category: 'general' },
            { id: 3, name: 'Headache', category: 'neurological' },
            { id: 4, name: 'Sore throat', category: 'respiratory' },
            { id: 5, name: 'Runny nose', category: 'respiratory' },
            { id: 6, name: 'Nausea', category: 'digestive' },
            { id: 7, name: 'Vomiting', category: 'digestive' },
            { id: 8, name: 'Diarrhea', category: 'digestive' },
            { id: 9, name: 'Fatigue', category: 'general' },
            { id: 10, name: 'Body ache', category: 'general' },
            { id: 11, name: 'Shortness of breath', category: 'respiratory' },
            { id: 12, name: 'Chest pain', category: 'respiratory' },
            { id: 13, name: 'Dizziness', category: 'neurological' },
            { id: 14, name: 'Abdominal pain', category: 'digestive' }
        ];

        // Diseases Database
        const diseasesDB = [
            {
                id: 1, name: 'Common Cold',
                symptoms: [1, 4, 5, 2],
                severity: 'low',
                description: 'Viral infection of upper respiratory tract',
                advice: ['Rest', 'Drink warm fluids', 'Steam inhalation'],
                homeRemedies: ['Ginger tea', 'Honey', 'Salt water gargle'],
                warningSigns: ['High fever', 'Difficulty breathing']
            },
            {
                id: 2, name: 'Viral Fever',
                symptoms: [2, 3, 9, 10],
                severity: 'medium',
                description: 'Common viral infection',
                advice: ['Complete rest', 'Stay hydrated', 'Take paracetamol'],
                homeRemedies: ['Turmeric milk', 'Herbal tea', 'Cold compress'],
                warningSigns: ['Very high fever', 'Severe headache']
            },
            {
                id: 3, name: 'Food Poisoning',
                symptoms: [6, 7, 8, 14],
                severity: 'medium',
                description: 'Infection from contaminated food',
                advice: ['ORS solution', 'Bland diet', 'Avoid spicy food'],
                homeRemedies: ['Coconut water', 'Ginger tea', 'Rice water'],
                warningSigns: ['Blood in stool', 'Severe dehydration']
            }
        ];

        // Districts
        const districts = [
            'Chennai', 'Coimbatore', 'Madurai', 'Salem', 'Tirunelveli',
            'Vellore', 'Erode', 'Kanyakumari', 'Thoothukkudi', 'Thanjavur'
        ];

        let selectedSymptoms = [];
        let currentCategory = 'all';
        let isRecording = false;
        let timerInterval = null;
        let seconds = 0;

        // ==================== INIT ====================
        document.addEventListener('DOMContentLoaded', () => {
            loadDistricts();
            displaySymptoms('all');
            updateAllStats();
            
            // Set demo values
            document.getElementById('patientEmail').value = 'patient@demo.com';
            document.getElementById('doctorEmail').value = 'doctor@demo.com';
            document.getElementById('patientPassword').value = '123456';
            document.getElementById('doctorPassword').value = '123456';
        });

        function loadDistricts() {
            const select = document.getElementById('district');
            select.innerHTML = '<option value="">Select District</option>';
            districts.forEach(d => {
                const option = document.createElement('option');
                option.value = d;
                option.textContent = d;
                select.appendChild(option);
            });
        }

        // ==================== LOGIN ====================
        function switchUserType(type) {
            document.querySelectorAll('.user-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.login-panel').forEach(p => p.classList.remove('active'));
            
            if (type === 'patient') {
                document.querySelectorAll('.user-tab')[0].classList.add('active');
                document.getElementById('patientPanel').classList.add('active');
            } else {
                document.querySelectorAll('.user-tab')[1].classList.add('active');
                document.getElementById('doctorPanel').classList.add('active');
            }
        }

        function sendOtp(type) {
            const email = document.getElementById(type + 'Email').value;
            if (!email) {
                showToast('Enter email/phone', 'error');
                return;
            }

            const otp = Math.floor(100000 + Math.random() * 900000).toString();
            otpStore[email] = otp;

            const btn = document.getElementById(type + 'OtpBtn');
            btn.disabled = true;
            btn.textContent = 'Sending...';

            setTimeout(() => {
                btn.disabled = false;
                btn.textContent = 'Send OTP';
                showToast(`OTP: ${otp}`, 'success');
                document.getElementById(type + 'Otp').value = otp;
            }, 1500);
        }

        function loginWithOtp(type) {
            const email = document.getElementById(type + 'Email').value;
            const otp = document.getElementById(type + 'Otp').value;

            if (!email || !otp) {
                showToast('Enter email and OTP', 'error');
                return;
            }

            if (type === 'patient') {
                let patient = patients.find(p => p.email === email || p.phone === email);
                if (!patient) patient = patients[0];
                currentPatient = patient;
                showPatientApp();
            } else {
                let doctor = doctors.find(d => d.email === email || d.phone === email);
                if (!doctor) doctor = doctors[0];
                currentDoctor = doctor;
                showDoctorApp();
            }
        }

        function loginWithPassword(type) {
            const email = document.getElementById(type + 'Email').value;
            const password = document.getElementById(type + 'Password').value;

            if (!email || !password) {
                showToast('Enter email and password', 'error');
                return;
            }

            if (type === 'patient') {
                let patient = patients.find(p => (p.email === email || p.phone === email) && p.password === password);
                if (!patient) patient = patients[0];
                currentPatient = patient;
                showPatientApp();
            } else {
                let doctor = doctors.find(d => (d.email === email || d.phone === email) && d.password === password);
                if (!doctor) doctor = doctors[0];
                currentDoctor = doctor;
                showDoctorApp();
            }
        }

        function socialLogin(provider, type) {
            showToast(`Login with ${provider}`, 'success');
            setTimeout(() => {
                if (type === 'patient') {
                    currentPatient = patients[0];
                    showPatientApp();
                } else {
                    currentDoctor = doctors[0];
                    showDoctorApp();
                }
            }, 1000);
        }

        function showPatientApp() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('patientApp').classList.add('visible');
            document.getElementById('doctorApp').classList.remove('visible');
            
            document.getElementById('patientName').textContent = currentPatient.name;
            document.getElementById('patientId').textContent = currentPatient.id;
            document.getElementById('patientEmail').textContent = currentPatient.email;
            document.getElementById('fullName').value = currentPatient.name;
            document.getElementById('age').value = currentPatient.age;
            document.getElementById('gender').value = currentPatient.gender;
            if (currentPatient.district) {
                document.getElementById('district').value = currentPatient.district;
            }
            
            updatePatientStats();
            showToast(`Welcome ${currentPatient.name}`);
        }

        function showDoctorApp() {
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('doctorApp').classList.add('visible');
            document.getElementById('patientApp').classList.remove('visible');
            
            document.getElementById('doctorName').textContent = currentDoctor.name;
            document.getElementById('doctorId').textContent = currentDoctor.id;
            document.getElementById('doctorEmail').textContent = currentDoctor.email;
            
            displayPatientRecords();
            updateDoctorStats();
            showToast(`Welcome ${currentDoctor.name}`);
        }

        function logout(type) {
            if (type === 'patient') {
                currentPatient = null;
                document.getElementById('patientApp').classList.remove('visible');
            } else {
                currentDoctor = null;
                document.getElementById('doctorApp').classList.remove('visible');
            }
            document.getElementById('loginPage').style.display = 'block';
            showToast('Logged out');
        }

        // ==================== LANGUAGE ====================
        function switchLanguage(lang) {
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            showToast('Language: ' + lang);
        }

        // ==================== SYMPTOMS ====================
        function displaySymptoms(category) {
            const grid = document.getElementById('symptomsGrid');
            grid.innerHTML = '';
            
            const filtered = category === 'all' ? symptomsDB : symptomsDB.filter(s => s.category === category);
            
            filtered.forEach(symptom => {
                const div = document.createElement('div');
                div.className = `symptom-item ${selectedSymptoms.includes(symptom.id) ? 'selected' : ''}`;
                div.onclick = () => toggleSymptom(symptom.id);
                div.innerHTML = `<span>${symptom.name}</span>`;
                grid.appendChild(div);
            });
        }

        function filterSymptoms(category) {
            currentCategory = category;
            document.querySelectorAll('.category-tab').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            displaySymptoms(category);
        }

        function toggleSymptom(id) {
            const index = selectedSymptoms.indexOf(id);
            if (index === -1) {
                selectedSymptoms.push(id);
            } else {
                selectedSymptoms.splice(index, 1);
            }
            updateSymptomTags();
            displaySymptoms(currentCategory);
        }

        function updateSymptomTags() {
            const container = document.getElementById('symptomTags');
            if (selectedSymptoms.length === 0) {
                container.innerHTML = '<p style="color:var(--gray);">No symptoms selected</p>';
                return;
            }
            
            container.innerHTML = '';
            selectedSymptoms.forEach(id => {
                const symptom = symptomsDB.find(s => s.id === id);
                if (symptom) {
                    const tag = document.createElement('span');
                    tag.className = 'symptom-tag';
                    tag.innerHTML = `${symptom.name} <button onclick="removeSymptom(${id})">√ó</button>`;
                    container.appendChild(tag);
                }
            });
        }

        function removeSymptom(id) {
            const index = selectedSymptoms.indexOf(id);
            if (index !== -1) {
                selectedSymptoms.splice(index, 1);
                updateSymptomTags();
                displaySymptoms(currentCategory);
            }
        }

        // ==================== VOICE ====================
        function toggleRecording() {
            if (!isRecording) {
                isRecording = true;
                document.getElementById('recordBtn').classList.add('recording');
                document.getElementById('recordBtn').innerHTML = '<i class="fas fa-stop"></i>';
                
                seconds = 0;
                timerInterval = setInterval(() => {
                    seconds++;
                    const mins = Math.floor(seconds / 60);
                    const secs = seconds % 60;
                    document.getElementById('timer').textContent = 
                        `${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
                }, 1000);
                
                setTimeout(() => {
                    if (isRecording) {
                        toggleRecording();
                        document.getElementById('typedSymptoms').value = 'fever, cough, headache';
                        showToast('Voice captured');
                    }
                }, 3000);
            } else {
                clearInterval(timerInterval);
                isRecording = false;
                document.getElementById('recordBtn').classList.remove('recording');
                document.getElementById('recordBtn').innerHTML = '<i class="fas fa-microphone"></i>';
            }
        }

        // ==================== DIAGNOSIS ====================
        function analyzeHealth() {
            if (!currentPatient) {
                showToast('Login first', 'error');
                return;
            }

            const typed = document.getElementById('typedSymptoms').value.toLowerCase();
            if (typed) {
                const words = typed.split(',').map(w => w.trim());
                words.forEach(word => {
                    const match = symptomsDB.find(s => s.name.toLowerCase().includes(word));
                    if (match && !selectedSymptoms.includes(match.id)) {
                        selectedSymptoms.push(match.id);
                    }
                });
                updateSymptomTags();
            }

            if (selectedSymptoms.length === 0) {
                showToast('Select symptoms', 'error');
                return;
            }

            let bestMatch = diseasesDB[0];
            let bestScore = 0;

            diseasesDB.forEach(disease => {
                const matches = disease.symptoms.filter(s => selectedSymptoms.includes(s)).length;
                const score = (matches / disease.symptoms.length) * 100;
                if (score > bestScore) {
                    bestScore = score;
                    bestMatch = disease;
                }
            });

            showResults(bestMatch);

            const diagnosis = {
                id: Date.now(),
                patientId: currentPatient.id,
                patientName: currentPatient.name,
                patientEmail: currentPatient.email,
                diagnosis: bestMatch.name,
                severity: bestMatch.severity,
                symptoms: selectedSymptoms.map(id => symptomsDB.find(s => s.id === id)?.name),
                date: new Date().toISOString()
            };

            diagnoses.push(diagnosis);
            localStorage.setItem('diagnoses', JSON.stringify(diagnoses));
            
            updatePatientStats();
            showToast('Analysis complete');
        }

        function showResults(disease) {
            const matched = disease.symptoms.filter(id => selectedSymptoms.includes(id))
                .map(id => symptomsDB.find(s => s.id === id)?.name);
            
            const results = document.getElementById('results');
            results.innerHTML = `
                <h3 style="color:var(--primary); margin-bottom:20px;">Diagnosis Report</h3>
                <div style="margin-bottom:20px;">
                    <h4>${disease.name}</h4>
                    <span class="severity-badge severity-${disease.severity}">${disease.severity.toUpperCase()}</span>
                    <p style="margin-top:10px;">${disease.description}</p>
                </div>
                <div style="margin:20px 0;">
                    <strong>‚úÖ Matched Symptoms:</strong>
                    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:10px;">
                        ${matched.map(s => `<span style="background:var(--success); color:white; padding:5px 15px; border-radius:20px;">${s}</span>`).join('')}
                    </div>
                </div>
                <div style="margin:20px 0;">
                    <strong>üìã Advice:</strong>
                    <ul>${disease.advice.map(a => `<li>${a}</li>`).join('')}</ul>
                </div>
                <div style="margin:20px 0;">
                    <strong>üè† Home Remedies:</strong>
                    <ul>${disease.homeRemedies.map(r => `<li>${r}</li>`).join('')}</ul>
                </div>
                ${disease.severity === 'high' ? `
                    <div style="background:#fee2e2; padding:20px; border-radius:20px; margin:20px 0;">
                        <strong style="color:var(--danger);">‚ö†Ô∏è Consult Doctor Immediately</strong>
                        <ul style="color:var(--danger);">${disease.warningSigns.map(w => `<li>${w}</li>`).join('')}</ul>
                    </div>
                ` : ''}
                <button class="login-btn" onclick="document.getElementById('results').style.display='none'" style="width:auto; padding:10px 25px;">Close</button>
            `;
            results.style.display = 'block';
        }

        // ==================== STATS ====================
        function updatePatientStats() {
            const patientDiag = diagnoses.filter(d => d.patientId === currentPatient?.id);
            document.getElementById('patientVisits').textContent = patientDiag.length;
            document.getElementById('patientDiagnoses').textContent = patientDiag.length;
            document.getElementById('patientHighRisk').textContent = patientDiag.filter(d => d.severity === 'high').length;
            document.getElementById('patientToday').textContent = patientDiag.filter(d => 
                new Date(d.date).toDateString() === new Date().toDateString()
            ).length;
        }

        function updateDoctorStats() {
            document.getElementById('totalReports').textContent = diagnoses.length;
            document.getElementById('criticalCases').textContent = diagnoses.filter(d => d.severity === 'high').length;
            document.getElementById('todayPatients').textContent = diagnoses.filter(d => 
                new Date(d.date).toDateString() === new Date().toDateString()
            ).length;
        }

        function updateAllStats() {
            if (currentPatient) updatePatientStats();
            if (currentDoctor) updateDoctorStats();
        }

        // ==================== DOCTOR ====================
        function displayPatientRecords() {
            const container = document.getElementById('patientRecords');
            
            if (diagnoses.length === 0) {
                container.innerHTML = '<p>No records yet</p>';
                return;
            }

            const groups = {};
            diagnoses.forEach(d => {
                if (!groups[d.patientId]) {
                    groups[d.patientId] = {
                        patientId: d.patientId,
                        patientName: d.patientName,
                        patientEmail: d.patientEmail,
                        records: []
                    };
                }
                groups[d.patientId].records.push(d);
            });

            container.innerHTML = '';
            Object.values(groups).forEach(g => {
                const div = document.createElement('div');
                div.className = 'patient-record';
                div.onclick = () => showPatientHistory(g.patientId);
                div.innerHTML = `
                    <div>
                        <h4>${g.patientName}</h4>
                        <p>ID: ${g.patientId} | ${g.patientEmail}</p>
                        <p>Visits: ${g.records.length} | Critical: ${g.records.filter(r => r.severity === 'high').length}</p>
                    </div>
                    <button class="login-btn" style="width:auto; padding:8px 20px;" onclick="event.stopPropagation(); showPatientHistory('${g.patientId}')">View</button>
                `;
                container.appendChild(div);
            });
        }

        function showPatientHistory(patientId) {
            const records = diagnoses.filter(d => d.patientId === patientId);
            const patient = patients.find(p => p.id === patientId);
            
            let msg = `PATIENT: ${patient?.name}\n`;
            msg += `ID: ${patientId}\n`;
            msg += `Email: ${patient?.email}\n`;
            msg += `Total Visits: ${records.length}\n\n`;
            
            records.forEach((r, i) => {
                msg += `Visit ${i+1}: ${new Date(r.date).toLocaleDateString()}\n`;
                msg += `Diagnosis: ${r.diagnosis} (${r.severity})\n`;
                msg += `Symptoms: ${r.symptoms.join(', ')}\n`;
                msg += `-------------------\n`;
            });
            
            alert(msg);
        }

        // ==================== TOAST ====================
        function showToast(msg, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.className = `toast show ${type}`;
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
